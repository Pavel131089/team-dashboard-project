var Ya=Object.defineProperty,Ga=Object.defineProperties;var Xa=Object.getOwnPropertyDescriptors;var vt=Object.getOwnPropertySymbols;var vr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable;var xr=(e,t,n)=>t in e?Ya(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))vr.call(t,n)&&xr(e,n,t[n]);if(vt)for(var n of vt(t))yr.call(t,n)&&xr(e,n,t[n]);return e},S=(e,t)=>Ga(e,Xa(t));var T=(e,t)=>{var n={};for(var s in e)vr.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&vt)for(var s of vt(e))t.indexOf(s)<0&&yr.call(e,s)&&(n[s]=e[s]);return n};var ue=(e,t,n)=>new Promise((s,o)=>{var a=c=>{try{l(n.next(c))}catch(u){o(u)}},i=c=>{try{l(n.throw(c))}catch(u){o(u)}},l=c=>c.done?s(c.value):Promise.resolve(c.value).then(a,i);l((n=n.apply(e,t)).next())});import{j as r,B as ee,e as Ke,u as Ve,P as V,f as Bt,g as W,h as q,i as me,k as On,l as $,m as _n,n as Pt,o as Wr,p as qa,q as Ur,D as zr,X as Ja,r as Za,s as Kr,V as Qa,t as ei,v as ti,b as Pe,c as $e,C as Be,d as ct,w as yt}from"./ui-CBbhuu0b.js";import{u as Yr,r as d,R as se,a as Mn}from"./vendor-DxaywbHF.js";import{I as L}from"./icon-CeCB3gnH.js";import{P as Gr,g as en,T as Vt,a as ni,b as ri,c as wt,d as jt,S as Le}from"./skeleton-CIHtvRLz.js";import{u as Ie,a as kn}from"./index-DQjIwgLJ.js";import{B as ut}from"./badge-D_dw66VG.js";import{a as te,t as si,g as oi,c as ai,b as ii}from"./index-qiOd5fLb.js";import{L as U,I as Q,u as Xr,b as qr,R as Jr,a as ft}from"./radio-group-DThqyodC.js";import{A as li,a as ci,b as di}from"./alert-FLBE-qXf.js";const ui=({username:e,onLogout:t})=>{const n=e||"Менеджер",s=Yr();return r.jsx("header",{className:"bg-white shadow-sm",children:r.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[r.jsx("h1",{className:"text-xl font-bold truncate",children:"Панель управления"}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>s("/database-status"),children:[r.jsx(L,{name:"Database",className:"mr-2 h-4 w-4"}),r.jsx("span",{className:"hidden md:inline",children:"База данных"})]}),r.jsxs("span",{className:"text-sm text-slate-600 flex items-center",children:[r.jsx(L,{name:"User",className:"mr-1 md:mr-2 h-4 w-4"}),r.jsx("span",{className:"hidden md:inline",children:n}),r.jsx("span",{className:"md:hidden",children:n})]}),r.jsxs(ee,{variant:"outline",size:"sm",onClick:t,children:[r.jsx(L,{name:"LogOut",className:"md:mr-2 h-4 w-4"}),r.jsx("span",{className:"hidden md:inline",children:"Выйти"})]})]})]})})},fi=1,mi=1e6;let tn=0;function pi(){return tn=(tn+1)%Number.MAX_SAFE_INTEGER,tn.toString()}const nn=new Map,wr=e=>{if(nn.has(e))return;const t=setTimeout(()=>{nn.delete(e),At({type:"REMOVE_TOAST",toastId:e})},mi);nn.set(e,t)},hi=(e,t)=>{switch(t.type){case"ADD_TOAST":return S(g({},e),{toasts:[t.toast,...e.toasts].slice(0,fi)});case"UPDATE_TOAST":return S(g({},e),{toasts:e.toasts.map(n=>n.id===t.toast.id?g(g({},n),t.toast):n)});case"DISMISS_TOAST":{const{toastId:n}=t;return n?wr(n):e.toasts.forEach(s=>{wr(s.id)}),S(g({},e),{toasts:e.toasts.map(s=>s.id===n||n===void 0?S(g({},s),{open:!1}):s)})}case"REMOVE_TOAST":return t.toastId===void 0?S(g({},e),{toasts:[]}):S(g({},e),{toasts:e.toasts.filter(n=>n.id!==t.toastId)})}},gi=[];let rn={toasts:[]};function At(e){rn=hi(rn,e),gi.forEach(t=>{t(rn)})}function Ce(t){var e=T(t,[]);const n=pi(),s=a=>At({type:"UPDATE_TOAST",toast:S(g({},a),{id:n})}),o=()=>At({type:"DISMISS_TOAST",toastId:n});return At({type:"ADD_TOAST",toast:S(g({},e),{id:n,open:!0,onOpenChange:a=>{a||o()}})}),{id:n,dismiss:o,update:s}}var Ht="Collapsible",[xi,Zr]=Ke(Ht),[vi,Fn]=xi(Ht),Qr=d.forwardRef((e,t)=>{const f=e,{__scopeCollapsible:n,open:s,defaultOpen:o,disabled:a,onOpenChange:i}=f,l=T(f,["__scopeCollapsible","open","defaultOpen","disabled","onOpenChange"]),[c,u]=Ve({prop:s,defaultProp:o!=null?o:!1,onChange:i,caller:Ht});return r.jsx(vi,{scope:n,disabled:a,contentId:Ie(),open:c,onOpenToggle:d.useCallback(()=>u(m=>!m),[u]),children:r.jsx(V.div,S(g({"data-state":$n(c),"data-disabled":a?"":void 0},l),{ref:t}))})});Qr.displayName=Ht;var es="CollapsibleTrigger",ts=d.forwardRef((e,t)=>{const a=e,{__scopeCollapsible:n}=a,s=T(a,["__scopeCollapsible"]),o=Fn(es,n);return r.jsx(V.button,S(g({type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":$n(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled},s),{ref:t,onClick:W(e.onClick,o.onOpenToggle)}))});ts.displayName=es;var Ln="CollapsibleContent",ns=d.forwardRef((e,t)=>{const a=e,{forceMount:n}=a,s=T(a,["forceMount"]),o=Fn(Ln,e.__scopeCollapsible);return r.jsx(Bt,{present:n||o.open,children:({present:i})=>r.jsx(yi,S(g({},s),{ref:t,present:i}))})});ns.displayName=Ln;var yi=d.forwardRef((e,t)=>{const N=e,{__scopeCollapsible:n,present:s,children:o}=N,a=T(N,["__scopeCollapsible","present","children"]),i=Fn(Ln,n),[l,c]=d.useState(s),u=d.useRef(null),f=q(t,u),m=d.useRef(0),p=m.current,v=d.useRef(0),j=v.current,x=i.open||l,h=d.useRef(x),w=d.useRef(void 0);return d.useEffect(()=>{const y=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(y)},[]),me(()=>{const y=u.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const b=y.getBoundingClientRect();m.current=b.height,v.current=b.width,h.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),c(s)}},[i.open,s]),r.jsx(V.div,S(g({"data-state":$n(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!x},a),{ref:f,style:g({"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0},e.style),children:x&&o}))});function $n(e){return e?"open":"closed"}var wi=Qr,ji=ts,bi=ns,ge="Accordion",Ni=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Bn,Si,Ci]=On(ge),[Wt,sf]=Ke(ge,[Ci,Zr]),Vn=Zr(),rs=se.forwardRef((e,t)=>{const i=e,{type:n}=i,s=T(i,["type"]),o=s,a=s;return r.jsx(Bn.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?r.jsx(Ei,S(g({},a),{ref:t})):r.jsx(Di,S(g({},o),{ref:t}))})});rs.displayName=ge;var[ss,Ti]=Wt(ge),[os,Ai]=Wt(ge,{collapsible:!1}),Di=se.forwardRef((e,t)=>{const u=e,{value:n,defaultValue:s,onValueChange:o=()=>{},collapsible:a=!1}=u,i=T(u,["value","defaultValue","onValueChange","collapsible"]),[l,c]=Ve({prop:n,defaultProp:s!=null?s:"",onChange:o,caller:ge});return r.jsx(ss,{scope:e.__scopeAccordion,value:se.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:se.useCallback(()=>a&&c(""),[a,c]),children:r.jsx(os,{scope:e.__scopeAccordion,collapsible:a,children:r.jsx(as,S(g({},i),{ref:t}))})})}),Ei=se.forwardRef((e,t)=>{const f=e,{value:n,defaultValue:s,onValueChange:o=()=>{}}=f,a=T(f,["value","defaultValue","onValueChange"]),[i,l]=Ve({prop:n,defaultProp:s!=null?s:[],onChange:o,caller:ge}),c=se.useCallback(m=>l((p=[])=>[...p,m]),[l]),u=se.useCallback(m=>l((p=[])=>p.filter(v=>v!==m)),[l]);return r.jsx(ss,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:r.jsx(os,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(as,S(g({},a),{ref:t}))})})}),[Ri,Ut]=Wt(ge),as=se.forwardRef((e,t)=>{const v=e,{__scopeAccordion:n,disabled:s,dir:o,orientation:a="vertical"}=v,i=T(v,["__scopeAccordion","disabled","dir","orientation"]),l=se.useRef(null),c=q(l,t),u=Si(n),m=kn(o)==="ltr",p=W(e.onKeyDown,j=>{var _;if(!Ni.includes(j.key))return;const x=j.target,h=u().filter(M=>{var P;return!((P=M.ref.current)!=null&&P.disabled)}),w=h.findIndex(M=>M.ref.current===x),N=h.length;if(w===-1)return;j.preventDefault();let y=w;const b=0,C=N-1,D=()=>{y=w+1,y>C&&(y=b)},I=()=>{y=w-1,y<b&&(y=C)};switch(j.key){case"Home":y=b;break;case"End":y=C;break;case"ArrowRight":a==="horizontal"&&(m?D():I());break;case"ArrowDown":a==="vertical"&&D();break;case"ArrowLeft":a==="horizontal"&&(m?I():D());break;case"ArrowUp":a==="vertical"&&I();break}const A=y%N;(_=h[A].ref.current)==null||_.focus()});return r.jsx(Ri,{scope:n,disabled:s,direction:o,orientation:a,children:r.jsx(Bn.Slot,{scope:n,children:r.jsx(V.div,S(g({},i),{"data-orientation":a,ref:c,onKeyDown:s?void 0:p}))})})}),It="AccordionItem",[Pi,Hn]=Wt(It),is=se.forwardRef((e,t)=>{const m=e,{__scopeAccordion:n,value:s}=m,o=T(m,["__scopeAccordion","value"]),a=Ut(It,n),i=Ti(It,n),l=Vn(n),c=Ie(),u=s&&i.value.includes(s)||!1,f=a.disabled||e.disabled;return r.jsx(Pi,{scope:n,open:u,disabled:f,triggerId:c,children:r.jsx(wi,S(g(g({"data-orientation":a.orientation,"data-state":ms(u)},l),o),{ref:t,disabled:f,open:u,onOpenChange:p=>{p?i.onItemOpen(s):i.onItemClose(s)}}))})});is.displayName=It;var ls="AccordionHeader",cs=se.forwardRef((e,t)=>{const i=e,{__scopeAccordion:n}=i,s=T(i,["__scopeAccordion"]),o=Ut(ge,n),a=Hn(ls,n);return r.jsx(V.h3,S(g({"data-orientation":o.orientation,"data-state":ms(a.open),"data-disabled":a.disabled?"":void 0},s),{ref:t}))});cs.displayName=ls;var hn="AccordionTrigger",ds=se.forwardRef((e,t)=>{const c=e,{__scopeAccordion:n}=c,s=T(c,["__scopeAccordion"]),o=Ut(ge,n),a=Hn(hn,n),i=Ai(hn,n),l=Vn(n);return r.jsx(Bn.ItemSlot,{scope:n,children:r.jsx(ji,S(g(g({"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId},l),s),{ref:t}))})});ds.displayName=hn;var us="AccordionContent",fs=se.forwardRef((e,t)=>{const l=e,{__scopeAccordion:n}=l,s=T(l,["__scopeAccordion"]),o=Ut(ge,n),a=Hn(us,n),i=Vn(n);return r.jsx(bi,S(g(g({role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation},i),s),{ref:t,style:g({"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)"},e.style)}))});fs.displayName=us;function ms(e){return e?"open":"closed"}var Ii=rs,Oi=is,_i=cs,ps=ds,hs=fs;const Mi=Ii,gs=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Oi,g({ref:n,className:$("border-b",e)},t))});gs.displayName="AccordionItem";const xs=d.forwardRef((o,s)=>{var a=o,{className:e,children:t}=a,n=T(a,["className","children"]);return r.jsx(_i,{className:"flex",children:r.jsxs(ps,S(g({ref:s,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e)},n),{children:[t,r.jsx(_n,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]}))})});xs.displayName=ps.displayName;const Wn=d.forwardRef((o,s)=>{var a=o,{className:e,children:t}=a,n=T(a,["className","children"]);return r.jsx(hs,S(g({ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"},n),{children:r.jsx("div",{className:$("pb-4 pt-0",e),children:t})}))});Wn.displayName=hs.displayName;const ki=({project:e})=>{const t=c=>{if(!c||c.length===0)return 0;const u=c.reduce((f,m)=>f+(m.progress||0),0);return Math.round(u/c.length)},n=c=>c.filter(u=>u.progress===100).length,s=c=>c.reduce((u,f)=>u+(f.price||0),0),o=t(e.tasks),a=n(e.tasks),i=e.tasks.length;s(e.tasks);const l=c=>c>=75?"bg-green-500":c>=50?"bg-blue-500":c>=25?"bg-yellow-500":"bg-red-500";return r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"ListChecks",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Всего задач:"}),r.jsx("span",{className:"text-sm font-medium",children:i})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"CheckCircle2",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Выполнено:"}),r.jsx("span",{className:"text-sm font-medium",children:a}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i>0?Math.round(a/i*100):0,"%)"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"BarChart2",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Прогресс проекта:"}),r.jsxs("span",{className:"text-sm font-medium",children:[o,"%"]})]})]}),r.jsx(Gr,{value:o,className:"h-2 w-full bg-secondary",indicatorClassName:l(o)})]})},gn=e=>{if(!e)return"Не указана";try{return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Error formatting date:",t),"Некорректная дата"}},sn=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(e),jr=(e,t)=>{if(!e)return"Не назначено";if(t&&t.length>0){if(Array.isArray(e))return e.map(n=>{const s=t.find(o=>o.id===n);return s?s.username:n}).join(", ");{const n=t.find(s=>s.id===e);return n?n.username:e}}return Array.isArray(e)?e.join(", "):e},Fi=e=>e.tasks.reduce((t,n)=>t+(n.price||0),0),Li=e=>{if(!e)return 0;const t=new Date(e),n=new Date;if(t>n)return 0;const s=Math.abs(n.getTime()-t.getTime());return Math.ceil(s/(1e3*60*60*24))},$i=({project:e})=>{const t=Fi(e),n=Li(e.startDate),s=e.tasks.length;return r.jsxs(r.Fragment,{children:[r.jsx(xs,{className:"px-4 py-3 hover:no-underline",children:r.jsxs("div",{className:"flex w-full items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10",children:r.jsx(L,{name:"FolderOpen",className:"h-5 w-5 text-primary"})}),r.jsxs("div",{className:"space-y-1 text-left",children:[r.jsx("h3",{className:"text-base font-medium",children:e.name}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description||"Нет описания"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ut,{variant:"outline",className:"ml-auto",children:["Задач: ",s]}),r.jsx(ut,{variant:"secondary",className:"font-mono",children:sn(t)})]})]})}),r.jsxs(Wn,{className:"px-4 pb-3 pt-0",children:[r.jsxs("div",{className:"mb-3 grid grid-cols-1 gap-2 md:grid-cols-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"Calendar",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Даты:"}),r.jsxs("span",{className:"text-sm font-medium",children:[gn(e.startDate)," — ",gn(e.endDate)]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"Clock",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Прошло дней:"}),r.jsxs("span",{className:"text-sm font-medium",children:[n," ",n===1?"день":n>1&&n<5?"дня":"дней"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(L,{name:"DollarSign",className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Бюджет:"}),r.jsxs("span",{className:"text-sm font-medium",children:[sn(e.price||0)," /"," ",sn(t)," (задачи)"]})]})]}),r.jsx(ki,{project:e})]})]})},Bi=({projectId:e,tasksCount:t,onDeleteProject:n,userRole:s})=>r.jsx("div",{className:"px-4 py-2 bg-slate-50 border-t border-b",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"font-medium",children:"Задачи проекта"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:["Всего задач: ",t]}),s==="manager"&&r.jsxs(ee,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>n(e),children:[r.jsx(L,{name:"Trash2",size:16,className:"mr-1"}),"Удалить проект"]})]})]})}),Un=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",g({ref:n,className:$("w-full caption-bottom text-sm",e)},t))})});Un.displayName="Table";const zn=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("thead",g({ref:n,className:$("[&_tr]:border-b",e)},t))});zn.displayName="TableHeader";const Kn=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("tbody",g({ref:n,className:$("[&_tr:last-child]:border-0",e)},t))});Kn.displayName="TableBody";const Vi=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("tfoot",g({ref:n,className:$("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e)},t))});Vi.displayName="TableFooter";const mt=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("tr",g({ref:n,className:$("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e)},t))});mt.displayName="TableRow";const ie=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("th",g({ref:n,className:$("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e)},t))});ie.displayName="TableHead";const le=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("td",g({ref:n,className:$("p-4 align-middle [&:has([role=checkbox])]:pr-0",e)},t))});le.displayName="TableCell";const Hi=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx("caption",g({ref:n,className:$("mt-4 text-sm text-muted-foreground",e)},t))});Hi.displayName="TableCaption";const Wi=({progress:e,assignedTo:t})=>e===100?r.jsx(ut,{variant:"outline",className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Завершено"}):t?r.jsx(ut,{variant:"outline",className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"В работе"}):r.jsx(ut,{variant:"outline",className:"bg-gray-100 text-gray-800 hover:bg-gray-100",children:"Ожидает"}),Ui=({task:e})=>{const t=Array.isArray(e.assignedTo)&&e.assignedTo.length>1;return r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:e.name}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:e.description}),t&&r.jsxs("div",{className:"mt-1 text-xs inline-flex items-center bg-purple-100 text-purple-800 rounded px-2 py-0.5",children:[r.jsx(L,{name:"Users",className:"h-3 w-3 mr-1"}),"Выполняют ",e.assignedTo.length," сотрудников"]})]})},zi=({startDate:e,endDate:t,actualStartDate:n,actualEndDate:s,formatDate:o})=>r.jsxs("div",{className:"text-xs",children:[r.jsxs("div",{children:["План: ",o(e)," — ",o(t)]}),n&&r.jsxs("div",{className:"mt-1",children:["Факт: ",o(n),s?` — ${o(s)}`:""]})]}),Ki=({assignedTo:e,assignedToNames:t})=>{const[n,s]=d.useState("Не назначено");if(d.useEffect(()=>{if(t&&t.length>0){s(en(t));return}if(!e){s("Не назначено");return}if(Array.isArray(e)){if(e.length===0){s("Не назначено");return}const o=en(e);s(o)}else{const o=en([e]);s(o)}},[e,t]),n==="Не назначено")return r.jsx("span",{className:"text-slate-400",children:"Не назначено"});if(n.includes(",")){const o=n.split(",").map(a=>a.trim());return r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs font-medium mb-1",children:[o.length," ",o.length>1?"исполнителей":"исполнитель",":"]}),r.jsx("ul",{className:"list-disc pl-4 text-xs space-y-0.5",children:o.map((a,i)=>r.jsx("li",{children:a},i))})]})}return r.jsx("span",{children:n})},Yi=({progress:e,onProgressChange:t})=>r.jsxs("div",{className:"w-full flex flex-col space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"relative h-2 w-24",children:[r.jsx(Gr,{value:e,className:"h-2 w-24"}),r.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${e<30?"bg-red-500":e<70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e}%`}})})]}),r.jsxs("span",{className:"text-xs",children:[e,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:e,onChange:n=>t(parseInt(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),Gi=({comments:e,isEditing:t,newComment:n,onNewCommentChange:s,onSaveComment:o,onCancelEdit:a,onStartEdit:i})=>{const l=Array.isArray(e)&&e.length>0,c=(u,f)=>{try{if(typeof u=="string")return r.jsx("li",{className:"text-gray-600",children:u},f);if(u&&typeof u=="object"){const m=u.text||(typeof u.toString=="function"?u.toString():"Комментарий"),p=u.date||u.author;return r.jsxs("li",{className:"text-gray-600",children:[p&&r.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[u.author&&r.jsx("span",{children:u.author}),u.author&&u.date&&r.jsx("span",{children:" • "}),u.date&&r.jsx("span",{children:typeof u.date=="string"?new Date(u.date).toLocaleString("ru-RU",{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Некорректная дата"})]}),r.jsx("div",{children:m})]},f)}else return r.jsx("li",{className:"text-gray-600",children:r.jsx("span",{className:"text-gray-400",children:"Недоступный комментарий"})},f)}catch(m){return console.error("Ошибка при рендеринге комментария:",m),r.jsx("li",{className:"text-gray-600",children:r.jsx("span",{className:"text-gray-400",children:"Ошибка отображения комментария"})},f)}};return r.jsxs(r.Fragment,{children:[l?r.jsxs("div",{className:"mt-2 text-xs bg-gray-50 p-2 rounded border border-gray-200",children:[r.jsx("div",{className:"font-medium text-gray-700 mb-1",children:"Комментарии:"}),r.jsx("ul",{className:"list-disc pl-4 space-y-1",children:e.map((u,f)=>c(u,f))})]}):null,t?r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsx(Vt,{value:n,onChange:u=>s(u.target.value),placeholder:"Введите комментарий...",className:"text-xs",rows:2}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ee,{size:"sm",onClick:o,children:"Сохранить"}),r.jsx(ee,{size:"sm",variant:"outline",onClick:a,children:"Отмена"})]})]}):r.jsxs(ee,{variant:"ghost",size:"sm",className:"mt-2 h-7 text-xs",onClick:i,children:[r.jsx(L,{name:"MessageSquarePlus",className:"h-3.5 w-3.5 mr-1"}),"Добавить комментарий"]})]})};var on="focusScope.autoFocusOnMount",an="focusScope.autoFocusOnUnmount",br={bubbles:!1,cancelable:!0},Xi="FocusScope",Yn=d.forwardRef((e,t)=>{const x=e,{loop:n=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:a}=x,i=T(x,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[l,c]=d.useState(null),u=Pt(o),f=Pt(a),m=d.useRef(null),p=q(t,h=>c(h)),v=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(s){let h=function(b){if(v.paused||!l)return;const C=b.target;l.contains(C)?m.current=C:Re(m.current,{select:!0})},w=function(b){if(v.paused||!l)return;const C=b.relatedTarget;C!==null&&(l.contains(C)||Re(m.current,{select:!0}))},N=function(b){if(document.activeElement===document.body)for(const D of b)D.removedNodes.length>0&&Re(l)};document.addEventListener("focusin",h),document.addEventListener("focusout",w);const y=new MutationObserver(N);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",w),y.disconnect()}}},[s,l,v.paused]),d.useEffect(()=>{if(l){Sr.add(v);const h=document.activeElement;if(!l.contains(h)){const N=new CustomEvent(on,br);l.addEventListener(on,u),l.dispatchEvent(N),N.defaultPrevented||(qi(tl(vs(l)),{select:!0}),document.activeElement===h&&Re(l))}return()=>{l.removeEventListener(on,u),setTimeout(()=>{const N=new CustomEvent(an,br);l.addEventListener(an,f),l.dispatchEvent(N),N.defaultPrevented||Re(h!=null?h:document.body,{select:!0}),l.removeEventListener(an,f),Sr.remove(v)},0)}}},[l,u,f,v]);const j=d.useCallback(h=>{if(!n&&!s||v.paused)return;const w=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,N=document.activeElement;if(w&&N){const y=h.currentTarget,[b,C]=Ji(y);b&&C?!h.shiftKey&&N===C?(h.preventDefault(),n&&Re(b,{select:!0})):h.shiftKey&&N===b&&(h.preventDefault(),n&&Re(C,{select:!0})):N===y&&h.preventDefault()}},[n,s,v.paused]);return r.jsx(V.div,S(g({tabIndex:-1},i),{ref:p,onKeyDown:j}))});Yn.displayName=Xi;function qi(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Re(s,{select:t}),document.activeElement!==n)return}function Ji(e){const t=vs(e),n=Nr(t,e),s=Nr(t.reverse(),e);return[n,s]}function vs(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Nr(e,t){for(const n of e)if(!Zi(n,{upTo:t}))return n}function Zi(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Qi(e){return e instanceof HTMLInputElement&&"select"in e}function Re(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Qi(e)&&t&&e.select()}}var Sr=el();function el(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Cr(e,t),e.unshift(t)},remove(t){var n;e=Cr(e,t),(n=e[0])==null||n.resume()}}}function Cr(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function tl(e){return e.filter(t=>t.tagName!=="A")}var ln=0;function ys(){d.useEffect(()=>{var t,n;const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=e[0])!=null?t:Tr()),document.body.insertAdjacentElement("beforeend",(n=e[1])!=null?n:Tr()),ln++,()=>{ln===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),ln--}},[])}function Tr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ve=function(){return ve=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},ve.apply(this,arguments)};function ws(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}function nl(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,a;s<o;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var Dt="right-scroll-bar-position",Et="width-before-scroll-bar",rl="with-scroll-bars-hidden",sl="--removed-body-scroll-bar-size";function cn(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ol(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var o=n.value;o!==s&&(n.value=s,n.callback(s,o))}}}})[0];return n.callback=t,n.facade}var al=typeof window!="undefined"?d.useLayoutEffect:d.useEffect,Ar=new WeakMap;function il(e,t){var n=ol(null,function(s){return e.forEach(function(o){return cn(o,s)})});return al(function(){var s=Ar.get(n);if(s){var o=new Set(s),a=new Set(e),i=n.current;o.forEach(function(l){a.has(l)||cn(l,null)}),a.forEach(function(l){o.has(l)||cn(l,i)})}Ar.set(n,e)},[e]),n}function ll(e){return e}function cl(e,t){t===void 0&&(t=ll);var n=[],s=!1,o={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(s=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var f=i;i=[],f.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){i.push(f),u()},filter:function(f){return i=i.filter(f),n}}}};return o}function dl(e){e===void 0&&(e={});var t=cl(null);return t.options=ve({async:!0,ssr:!1},e),t}var js=function(e){var t=e.sideCar,n=ws(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return d.createElement(s,ve({},n))};js.isSideCarExport=!0;function ul(e,t){return e.useMedium(t),js}var bs=dl(),dn=function(){},zt=d.forwardRef(function(e,t){var n=d.useRef(null),s=d.useState({onScrollCapture:dn,onWheelCapture:dn,onTouchMoveCapture:dn}),o=s[0],a=s[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,v=e.noIsolation,j=e.inert,x=e.allowPinchZoom,h=e.as,w=h===void 0?"div":h,N=e.gapMode,y=ws(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,C=il([n,t]),D=ve(ve({},y),o);return d.createElement(d.Fragment,null,f&&d.createElement(b,{sideCar:bs,removeScrollBar:u,shards:m,noIsolation:v,inert:j,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:N}),i?d.cloneElement(d.Children.only(l),ve(ve({},D),{ref:C})):d.createElement(w,ve({},D,{className:c,ref:C}),l))});zt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zt.classNames={fullWidth:Et,zeroRight:Dt};var fl=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function ml(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fl();return t&&e.setAttribute("nonce",t),e}function pl(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function hl(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gl=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ml())&&(pl(t,n),hl(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xl=function(){var e=gl();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ns=function(){var e=xl(),t=function(n){var s=n.styles,o=n.dynamic;return e(s,o),null};return t},vl={left:0,top:0,right:0,gap:0},un=function(e){return parseInt(e||"",10)||0},yl=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[un(n),un(s),un(o)]},wl=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return vl;var t=yl(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},jl=Ns(),Je="data-scroll-locked",bl=function(e,t,n,s){var o=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(rl,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Je,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dt,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Et,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Dt," .").concat(Dt,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Et," .").concat(Et,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Je,`] {
    `).concat(sl,": ").concat(l,`px;
  }
`)},Dr=function(){var e=parseInt(document.body.getAttribute(Je)||"0",10);return isFinite(e)?e:0},Nl=function(){d.useEffect(function(){return document.body.setAttribute(Je,(Dr()+1).toString()),function(){var e=Dr()-1;e<=0?document.body.removeAttribute(Je):document.body.setAttribute(Je,e.toString())}},[])},Sl=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,o=s===void 0?"margin":s;Nl();var a=d.useMemo(function(){return wl(o)},[o]);return d.createElement(jl,{styles:bl(a,!t,o,n?"":"!important")})},xn=!1;if(typeof window!="undefined")try{var bt=Object.defineProperty({},"passive",{get:function(){return xn=!0,!0}});window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch(e){xn=!1}var Ge=xn?{passive:!1}:!1,Cl=function(e){return e.tagName==="TEXTAREA"},Ss=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Cl(e)&&n[t]==="visible")},Tl=function(e){return Ss(e,"overflowY")},Al=function(e){return Ss(e,"overflowX")},Er=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot!="undefined"&&s instanceof ShadowRoot&&(s=s.host);var o=Cs(e,s);if(o){var a=Ts(e,s),i=a[1],l=a[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},Dl=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},El=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},Cs=function(e,t){return e==="v"?Tl(t):Al(t)},Ts=function(e,t){return e==="v"?Dl(t):El(t)},Rl=function(e,t){return e==="h"&&t==="rtl"?-1:1},Pl=function(e,t,n,s,o){var a=Rl(e,window.getComputedStyle(t).direction),i=a*s,l=n.target,c=t.contains(l),u=!1,f=i>0,m=0,p=0;do{var v=Ts(e,l),j=v[0],x=v[1],h=v[2],w=x-h-a*j;(j||w)&&Cs(e,l)&&(m+=w,p+=j),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(u=!0),u},Nt=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Rr=function(e){return[e.deltaX,e.deltaY]},Pr=function(e){return e&&"current"in e?e.current:e},Il=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ol=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_l=0,Xe=[];function Ml(e){var t=d.useRef([]),n=d.useRef([0,0]),s=d.useRef(),o=d.useState(_l++)[0],a=d.useState(Ns)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var x=nl([e.lockRef.current],(e.shards||[]).map(Pr),!0).filter(Boolean);return x.forEach(function(h){return h.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(h){return h.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(x,h){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var w=Nt(x),N=n.current,y="deltaX"in x?x.deltaX:N[0]-w[0],b="deltaY"in x?x.deltaY:N[1]-w[1],C,D=x.target,I=Math.abs(y)>Math.abs(b)?"h":"v";if("touches"in x&&I==="h"&&D.type==="range")return!1;var A=Er(I,D);if(!A)return!0;if(A?C=I:(C=I==="v"?"h":"v",A=Er(I,D)),!A)return!1;if(!s.current&&"changedTouches"in x&&(y||b)&&(s.current=C),!C)return!0;var _=s.current||C;return Pl(_,h,x,_==="h"?y:b)},[]),c=d.useCallback(function(x){var h=x;if(!(!Xe.length||Xe[Xe.length-1]!==a)){var w="deltaY"in h?Rr(h):Nt(h),N=t.current.filter(function(C){return C.name===h.type&&(C.target===h.target||h.target===C.shadowParent)&&Il(C.delta,w)})[0];if(N&&N.should){h.cancelable&&h.preventDefault();return}if(!N){var y=(i.current.shards||[]).map(Pr).filter(Boolean).filter(function(C){return C.contains(h.target)}),b=y.length>0?l(h,y[0]):!i.current.noIsolation;b&&h.cancelable&&h.preventDefault()}}},[]),u=d.useCallback(function(x,h,w,N){var y={name:x,delta:h,target:w,should:N,shadowParent:kl(w)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(b){return b!==y})},1)},[]),f=d.useCallback(function(x){n.current=Nt(x),s.current=void 0},[]),m=d.useCallback(function(x){u(x.type,Rr(x),x.target,l(x,e.lockRef.current))},[]),p=d.useCallback(function(x){u(x.type,Nt(x),x.target,l(x,e.lockRef.current))},[]);d.useEffect(function(){return Xe.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Ge),document.addEventListener("touchmove",c,Ge),document.addEventListener("touchstart",f,Ge),function(){Xe=Xe.filter(function(x){return x!==a}),document.removeEventListener("wheel",c,Ge),document.removeEventListener("touchmove",c,Ge),document.removeEventListener("touchstart",f,Ge)}},[]);var v=e.removeScrollBar,j=e.inert;return d.createElement(d.Fragment,null,j?d.createElement(a,{styles:Ol(o)}):null,v?d.createElement(Sl,{gapMode:e.gapMode}):null)}function kl(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Fl=ul(bs,Ml);var Gn=d.forwardRef(function(e,t){return d.createElement(zt,ve({},e,{ref:t,sideCar:Fl}))});Gn.classNames=zt.classNames;var Ll=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qe=new WeakMap,St=new WeakMap,Ct={},fn=0,As=function(e){return e&&(e.host||As(e.parentNode))},$l=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=As(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Bl=function(e,t,n,s){var o=$l(t,Array.isArray(e)?e:[e]);Ct[n]||(Ct[n]=new WeakMap);var a=Ct[n],i=[],l=new Set,c=new Set(o),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};o.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))f(p);else try{var v=p.getAttribute(s),j=v!==null&&v!=="false",x=(qe.get(p)||0)+1,h=(a.get(p)||0)+1;qe.set(p,x),a.set(p,h),i.push(p),x===1&&j&&St.set(p,!0),h===1&&p.setAttribute(n,"true"),j||p.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return f(t),l.clear(),fn++,function(){i.forEach(function(m){var p=qe.get(m)-1,v=a.get(m)-1;qe.set(m,p),a.set(m,v),p||(St.has(m)||m.removeAttribute(s),St.delete(m)),v||m.removeAttribute(n)}),fn--,fn||(qe=new WeakMap,qe=new WeakMap,St=new WeakMap,Ct={})}},Ds=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),o=Ll(e);return o?(s.push.apply(s,Array.from(o.querySelectorAll("[aria-live]"))),Bl(s,o,n,"aria-hidden")):function(){return null}},Kt="Dialog",[Es,Rs]=Ke(Kt),[Vl,xe]=Es(Kt),Ps=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,f]=Ve({prop:s,defaultProp:o!=null?o:!1,onChange:a,caller:Kt});return r.jsx(Vl,{scope:t,triggerRef:l,contentRef:c,contentId:Ie(),titleId:Ie(),descriptionId:Ie(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:i,children:n})};Ps.displayName=Kt;var Is="DialogTrigger",Os=d.forwardRef((e,t)=>{const i=e,{__scopeDialog:n}=i,s=T(i,["__scopeDialog"]),o=xe(Is,n),a=q(t,o.triggerRef);return r.jsx(V.button,S(g({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Jn(o.open)},s),{ref:a,onClick:W(e.onClick,o.onOpenToggle)}))});Os.displayName=Is;var Xn="DialogPortal",[Hl,_s]=Es(Xn,{forceMount:void 0}),Ms=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:o}=e,a=xe(Xn,t);return r.jsx(Hl,{scope:t,forceMount:n,children:d.Children.map(s,i=>r.jsx(Bt,{present:n||a.open,children:r.jsx(Wr,{asChild:!0,container:o,children:i})}))})};Ms.displayName=Xn;var Ot="DialogOverlay",ks=d.forwardRef((e,t)=>{const n=_s(Ot,e.__scopeDialog),i=e,{forceMount:s=n.forceMount}=i,o=T(i,["forceMount"]),a=xe(Ot,e.__scopeDialog);return a.modal?r.jsx(Bt,{present:s||a.open,children:r.jsx(Ul,S(g({},o),{ref:t}))}):null});ks.displayName=Ot;var Wl=Ur("DialogOverlay.RemoveScroll"),Ul=d.forwardRef((e,t)=>{const a=e,{__scopeDialog:n}=a,s=T(a,["__scopeDialog"]),o=xe(Ot,n);return r.jsx(Gn,{as:Wl,allowPinchZoom:!0,shards:[o.contentRef],children:r.jsx(V.div,S(g({"data-state":Jn(o.open)},s),{ref:t,style:g({pointerEvents:"auto"},s.style)}))})}),He="DialogContent",Fs=d.forwardRef((e,t)=>{const n=_s(He,e.__scopeDialog),i=e,{forceMount:s=n.forceMount}=i,o=T(i,["forceMount"]),a=xe(He,e.__scopeDialog);return r.jsx(Bt,{present:s||a.open,children:a.modal?r.jsx(zl,S(g({},o),{ref:t})):r.jsx(Kl,S(g({},o),{ref:t}))})});Fs.displayName=He;var zl=d.forwardRef((e,t)=>{const n=xe(He,e.__scopeDialog),s=d.useRef(null),o=q(t,n.contentRef,s);return d.useEffect(()=>{const a=s.current;if(a)return Ds(a)},[]),r.jsx(Ls,S(g({},e),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:W(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:W(e.onFocusOutside,a=>a.preventDefault())}))}),Kl=d.forwardRef((e,t)=>{const n=xe(He,e.__scopeDialog),s=d.useRef(!1),o=d.useRef(!1);return r.jsx(Ls,S(g({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),Ls=d.forwardRef((e,t)=>{const f=e,{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a}=f,i=T(f,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),l=xe(He,n),c=d.useRef(null),u=q(t,c);return ys(),r.jsxs(r.Fragment,{children:[r.jsx(Yn,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(zr,S(g({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Jn(l.open)},i),{ref:u,onDismiss:()=>l.onOpenChange(!1)}))}),r.jsxs(r.Fragment,{children:[r.jsx(Gl,{titleId:l.titleId}),r.jsx(ql,{contentRef:c,descriptionId:l.descriptionId})]})]})}),qn="DialogTitle",$s=d.forwardRef((e,t)=>{const a=e,{__scopeDialog:n}=a,s=T(a,["__scopeDialog"]),o=xe(qn,n);return r.jsx(V.h2,S(g({id:o.titleId},s),{ref:t}))});$s.displayName=qn;var Bs="DialogDescription",Vs=d.forwardRef((e,t)=>{const a=e,{__scopeDialog:n}=a,s=T(a,["__scopeDialog"]),o=xe(Bs,n);return r.jsx(V.p,S(g({id:o.descriptionId},s),{ref:t}))});Vs.displayName=Bs;var Hs="DialogClose",Ws=d.forwardRef((e,t)=>{const a=e,{__scopeDialog:n}=a,s=T(a,["__scopeDialog"]),o=xe(Hs,n);return r.jsx(V.button,S(g({type:"button"},s),{ref:t,onClick:W(e.onClick,()=>o.onOpenChange(!1))}))});Ws.displayName=Hs;function Jn(e){return e?"open":"closed"}var Us="DialogTitleWarning",[Yl,zs]=qa(Us,{contentName:He,titleName:qn,docsSlug:"dialog"}),Gl=({titleId:e})=>{const t=zs(Us),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Xl="DialogDescriptionWarning",ql=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zs(Xl).contentName}}.`;return d.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Ks=Ps,Jl=Os,Ys=Ms,Zn=ks,Qn=Fs,er=$s,tr=Vs,nr=Ws;const Gs=Ks,Zl=Ys,Xs=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Zn,g({ref:n,className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e)},t))});Xs.displayName=Zn.displayName;const rr=d.forwardRef((o,s)=>{var a=o,{className:e,children:t}=a,n=T(a,["className","children"]);return r.jsxs(Zl,{children:[r.jsx(Xs,{}),r.jsxs(Qn,S(g({ref:s,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e)},n),{children:[t,r.jsxs(nr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Ja,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});rr.displayName=Qn.displayName;const sr=n=>{var s=n,{className:e}=s,t=T(s,["className"]);return r.jsx("div",g({className:$("flex flex-col space-y-1.5 text-center sm:text-left",e)},t))};sr.displayName="DialogHeader";const qs=n=>{var s=n,{className:e}=s,t=T(s,["className"]);return r.jsx("div",g({className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e)},t))};qs.displayName="DialogFooter";const or=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(er,g({ref:n,className:$("text-lg font-semibold leading-none tracking-tight",e)},t))});or.displayName=er.displayName;const Ql=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(tr,g({ref:n,className:$("text-sm text-muted-foreground",e)},t))});Ql.displayName=tr.displayName;const ec=({isReadOnly:e})=>{const t=e?"Просмотр задачи":"Редактирование задачи";return r.jsx(sr,{children:r.jsx(or,{children:t})})},tc=({isReadOnly:e,onClose:t,onSubmit:n})=>r.jsxs(qs,{children:[r.jsx(ee,{type:"button",variant:"outline",onClick:t,children:e?"Закрыть":"Отмена"}),!e&&r.jsx(ee,{type:"button",onClick:n,children:"Сохранить"})]}),nc=({value:e,onChange:t,disabled:n=!1})=>r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"name",className:"text-right",children:"Название"}),r.jsx(Q,{id:"name",name:"name",value:e,onChange:t,className:"col-span-3",disabled:n,placeholder:"Введите название задачи"})]}),rc=({value:e,onChange:t,disabled:n=!1})=>r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"description",className:"text-right",children:"Описание"}),r.jsx(Vt,{id:"description",name:"description",value:e,onChange:t,className:"col-span-3",rows:3,disabled:n,placeholder:"Введите описание задачи"})]}),sc=({value:e,onChange:t,disabled:n=!1})=>r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"assignedToNames",className:"text-right",children:"Исполнители"}),r.jsx(Q,{id:"assignedToNames",name:"assignedToNames",value:e,onChange:t,className:"col-span-3",disabled:n,placeholder:"Введите имена через запятую"})]}),oc=({price:e,estimatedTime:t,onChange:n,disabled:s=!1})=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"price",className:"text-right",children:"Цена (₽)"}),r.jsx(Q,{id:"price",name:"price",type:"number",value:e===0?"":e||"",onChange:n,className:"col-span-3",disabled:s,placeholder:"0"})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"estimatedTime",className:"text-right",children:"Оценка времени (ч)"}),r.jsx(Q,{id:"estimatedTime",name:"estimatedTime",type:"number",value:t===0?"":t||"",onChange:n,className:"col-span-3",disabled:s,placeholder:"0"})]})]}),ac=({startDate:e,endDate:t,onChange:n,disabled:s=!1})=>{const o=a=>{if(!a)return"";try{return new Date(a).toISOString().split("T")[0]}catch(i){return""}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"startDate",className:"text-right",children:"Дата начала"}),r.jsx(Q,{id:"startDate",name:"startDate",type:"date",value:o(e),onChange:n,className:"col-span-3",disabled:s})]}),r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"endDate",className:"text-right",children:"Дата окончания"}),r.jsx(Q,{id:"endDate",name:"endDate",type:"date",value:o(t),onChange:n,className:"col-span-3",disabled:s})]})]})};function _t(e,[t,n]){return Math.min(n,Math.max(t,e))}var Js=["PageUp","PageDown"],Zs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Qs={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tt="Slider",[vn,ic,lc]=On(tt),[eo,of]=Ke(tt,[lc]),[cc,Yt]=eo(tt),to=d.forwardRef((e,t)=>{const P=e,{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:f,onValueChange:m=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:j}=P,x=T(P,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),h=d.useRef(new Set),w=d.useRef(0),y=i==="horizontal"?dc:uc,[b=[],C]=Ve({prop:f,defaultProp:u,onChange:R=>{var K;(K=[...h.current][w.current])==null||K.focus(),m(R)}}),D=d.useRef(b);function I(R){const k=gc(b,R);M(R,k)}function A(R){M(R,w.current)}function _(){const R=D.current[w.current];b[w.current]!==R&&p(b)}function M(R,k,{commit:K}={commit:!1}){const B=wc(a),F=jc(Math.round((R-s)/a)*a+s,B),H=_t(F,[s,o]);C((E=[])=>{const z=pc(E,H,k);if(yc(z,c*a)){w.current=z.indexOf(H);const J=String(z)!==String(E);return J&&K&&p(z),J?z:E}else return E})}return r.jsx(cc,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:o,valueIndexToChangeRef:w,thumbs:h.current,values:b,orientation:i,form:j,children:r.jsx(vn.Provider,{scope:e.__scopeSlider,children:r.jsx(vn.Slot,{scope:e.__scopeSlider,children:r.jsx(y,S(g({"aria-disabled":l,"data-disabled":l?"":void 0},x),{ref:t,onPointerDown:W(x.onPointerDown,()=>{l||(D.current=b)}),min:s,max:o,inverted:v,onSlideStart:l?void 0:I,onSlideMove:l?void 0:A,onSlideEnd:l?void 0:_,onHomeKeyDown:()=>!l&&M(s,0,{commit:!0}),onEndKeyDown:()=>!l&&M(o,b.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:k})=>{if(!l){const F=Js.includes(R.key)||R.shiftKey&&Zs.includes(R.key)?10:1,H=w.current,E=b[H],z=a*F*k;M(E+z,H,{commit:!0})}}}))})})})});to.displayName=tt;var[no,ro]=eo(tt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),dc=d.forwardRef((e,t)=>{const y=e,{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u}=y,f=T(y,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[m,p]=d.useState(null),v=q(t,b=>p(b)),j=d.useRef(void 0),x=kn(o),h=x==="ltr",w=h&&!a||!h&&a;function N(b){const C=j.current||m.getBoundingClientRect(),D=[0,C.width],A=ar(D,w?[n,s]:[s,n]);return j.current=C,A(b-C.left)}return r.jsx(no,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:r.jsx(so,S(g({dir:x,"data-orientation":"horizontal"},f),{ref:v,style:S(g({},f.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:b=>{const C=N(b.clientX);i==null||i(C)},onSlideMove:b=>{const C=N(b.clientX);l==null||l(C)},onSlideEnd:()=>{j.current=void 0,c==null||c()},onStepKeyDown:b=>{const D=Qs[w?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:D?-1:1})}}))})}),uc=d.forwardRef((e,t)=>{const x=e,{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=x,u=T(x,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),f=d.useRef(null),m=q(t,f),p=d.useRef(void 0),v=!o;function j(h){const w=p.current||f.current.getBoundingClientRect(),N=[0,w.height],b=ar(N,v?[s,n]:[n,s]);return p.current=w,b(h-w.top)}return r.jsx(no,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:r.jsx(so,S(g({"data-orientation":"vertical"},u),{ref:m,style:S(g({},u.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:h=>{const w=j(h.clientY);a==null||a(w)},onSlideMove:h=>{const w=j(h.clientY);i==null||i(w)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:h=>{const N=Qs[v?"from-bottom":"from-top"].includes(h.key);c==null||c({event:h,direction:N?-1:1})}}))})}),so=d.forwardRef((e,t)=>{const m=e,{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c}=m,u=T(m,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),f=Yt(tt,n);return r.jsx(V.span,S(g({},u),{ref:t,onKeyDown:W(e.onKeyDown,p=>{p.key==="Home"?(i(p),p.preventDefault()):p.key==="End"?(l(p),p.preventDefault()):Js.concat(Zs).includes(p.key)&&(c(p),p.preventDefault())}),onPointerDown:W(e.onPointerDown,p=>{const v=p.target;v.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(v)?v.focus():s(p)}),onPointerMove:W(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&o(p)}),onPointerUp:W(e.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&(v.releasePointerCapture(p.pointerId),a(p))})}))}),oo="SliderTrack",ao=d.forwardRef((e,t)=>{const a=e,{__scopeSlider:n}=a,s=T(a,["__scopeSlider"]),o=Yt(oo,n);return r.jsx(V.span,S(g({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},s),{ref:t}))});ao.displayName=oo;var yn="SliderRange",io=d.forwardRef((e,t)=>{const p=e,{__scopeSlider:n}=p,s=T(p,["__scopeSlider"]),o=Yt(yn,n),a=ro(yn,n),i=d.useRef(null),l=q(t,i),c=o.values.length,u=o.values.map(v=>uo(v,o.min,o.max)),f=c>1?Math.min(...u):0,m=100-Math.max(...u);return r.jsx(V.span,S(g({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},s),{ref:l,style:S(g({},e.style),{[a.startEdge]:f+"%",[a.endEdge]:m+"%"})}))});io.displayName=yn;var wn="SliderThumb",lo=d.forwardRef((e,t)=>{const n=ic(e.__scopeSlider),[s,o]=d.useState(null),a=q(t,l=>o(l)),i=d.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(fc,S(g({},e),{ref:a,index:i}))}),fc=d.forwardRef((e,t)=>{const N=e,{__scopeSlider:n,index:s,name:o}=N,a=T(N,["__scopeSlider","index","name"]),i=Yt(wn,n),l=ro(wn,n),[c,u]=d.useState(null),f=q(t,y=>u(y)),m=c?i.form||!!c.closest("form"):!0,p=Xr(c),v=i.values[s],j=v===void 0?0:uo(v,i.min,i.max),x=hc(s,i.values.length),h=p==null?void 0:p[l.size],w=h?xc(h,j,l.direction):0;return d.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${w}px)`},children:[r.jsx(vn.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(V.span,S(g({role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":v,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},a),{ref:f,style:v===void 0?{display:"none"}:e.style,onFocus:W(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})}))}),m&&r.jsx(co,{name:o!=null?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:v},s)]})});lo.displayName=wn;var mc="RadioBubbleInput",co=d.forwardRef((o,s)=>{var a=o,{__scopeSlider:e,value:t}=a,n=T(a,["__scopeSlider","value"]);const i=d.useRef(null),l=q(i,s),c=qr(t);return d.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&p){const v=new Event("input",{bubbles:!0});p.call(u,t),u.dispatchEvent(v)}},[c,t]),r.jsx(V.input,S(g({style:{display:"none"}},n),{ref:l,defaultValue:t}))});co.displayName=mc;function pc(e=[],t,n){const s=[...e];return s[n]=t,s.sort((o,a)=>o-a)}function uo(e,t,n){const a=100/(n-t)*(e-t);return _t(a,[0,100])}function hc(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function gc(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),s=Math.min(...n);return n.indexOf(s)}function xc(e,t,n){const s=e/2,a=ar([0,50],[0,s]);return(s-a(t)*n)*n}function vc(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function yc(e,t){if(t>0){const n=vc(e);return Math.min(...n)>=t}return!0}function ar(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function wc(e){return(String(e).split(".")[1]||"").length}function jc(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var fo=to,bc=ao,Nc=io,Sc=lo;const mo=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsxs(fo,S(g({ref:n,className:$("relative flex w-full touch-none select-none items-center",e)},t),{children:[r.jsx(bc,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(Nc,{className:"absolute h-full bg-primary"})}),r.jsx(Sc,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}))});mo.displayName=fo.displayName;const Cc=({progress:e,onChange:t,disabled:n=!1})=>{const s=o=>{const a={target:{name:"progress",value:o[0].toString()}};t(a)};return r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(U,{htmlFor:"progress",className:"text-right",children:"Прогресс (%)"}),r.jsxs("div",{className:"col-span-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{id:"progress",name:"progress",type:"number",min:"0",max:"100",value:e===0?"":e,onChange:t,disabled:n,placeholder:"0",className:"w-24"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[e,"%"]})]}),r.jsx(mo,{value:[e],min:0,max:100,step:5,onValueChange:s,disabled:n,className:"w-full"})]})]})},Tc=({formData:e,assigneeInput:t,isReadOnly:n,onInputChange:s})=>r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsx(nc,{value:e.name||"",onChange:s,disabled:n}),r.jsx(rc,{value:e.description||"",onChange:s,disabled:n}),r.jsx(sc,{value:t,onChange:s,disabled:n}),r.jsx(oc,{price:e.price,estimatedTime:e.estimatedTime,onChange:s,disabled:n}),r.jsx(ac,{startDate:e.startDate,endDate:e.endDate,onChange:s,disabled:n}),r.jsx(Cc,{progress:e.progress||0,onChange:s,disabled:n})]}),Ac=(e,t)=>{const n=g(g({},t),e);if(e.assigneeInput!==void 0){const s=e.assigneeInput?e.assigneeInput.split(",").map(o=>o.trim()).filter(Boolean):[];n.assignedToNames=s,s.length>1?n.assignedTo=s:s.length===1?n.assignedTo=s[0]:n.assignedTo=null}return n},Dc=e=>!e.name||e.name.trim()===""?"Необходимо указать название задачи":null;function Ec(e,t,n,s){const[o,a]=d.useState({}),[i,l]=d.useState("");return d.useEffect(()=>{if(e){const f=Array.isArray(e.assignedToNames)?e.assignedToNames.join(", "):typeof e.assignedToNames=="string"?e.assignedToNames:"";l(f),a({name:e.name||"",description:e.description||"",price:e.price||0,estimatedTime:e.estimatedTime||0,startDate:e.startDate||"",endDate:e.endDate||"",progress:e.progress||0,assignedTo:e.assignedTo,assignedToNames:e.assignedToNames,actualStartDate:e.actualStartDate,actualEndDate:e.actualEndDate,comments:e.comments})}},[e]),{formData:o,assigneeInput:i,handleInputChange:f=>{const{name:m,value:p}=f.target;if(m==="assignedToNames"){l(p);return}let v=p;(m==="price"||m==="estimatedTime"||m==="progress")&&(v=p===""?0:parseFloat(p)),a(j=>S(g({},j),{[m]:v}))},handleSubmit:()=>{if(!e){Ce({title:"Ошибка",description:"Задача не найдена",variant:"destructive"});return}const f=S(g({},o),{assigneeInput:i}),m=Dc(f);if(m){Ce({title:"Ошибка валидации",description:m,variant:"destructive"});return}const p=Ac(f,e);n(t,p),s(),Ce({title:"Задача обновлена",description:`Задача "${p.name}" успешно обновлена`})}}}const Rc=({isOpen:e,onClose:t,task:n,projectId:s,onSave:o,isReadOnly:a=!1})=>{const{formData:i,assigneeInput:l,handleInputChange:c,handleSubmit:u}=Ec(n,s,o,t);return n?r.jsx(Gs,{open:e,onOpenChange:t,children:r.jsxs(rr,{className:"sm:max-w-[500px]",children:[r.jsx(ec,{isReadOnly:a}),r.jsx(Tc,{formData:i,assigneeInput:l,isReadOnly:a,onInputChange:c}),r.jsx(tc,{isReadOnly:a,onClose:t,onSubmit:u})]})}):null},Pc=({task:e,project:t,userRole:n,formatDate:s,getAssignedUserName:o,onTaskUpdate:a,onDeleteTask:i})=>{const[l,c]=d.useState(null),[u,f]=d.useState(""),[m,p]=d.useState(!1),v=()=>{if(!u.trim()){te("Комментарий не может быть пустым");return}const j=e.comments||[],x=S(g({},e),{comments:[...j,u]});a(t.id,x),f(""),c(null),te("Комментарий успешно добавлен")};return r.jsxs(mt,{children:[r.jsxs(le,{children:[r.jsx(Ui,{task:e}),r.jsx(Gi,{comments:e.comments,isEditing:l===e.id,newComment:u,onNewCommentChange:f,onSaveComment:v,onCancelEdit:()=>{c(null),f("")},onStartEdit:()=>c(e.id)})]}),r.jsx(le,{children:r.jsx(Wi,{progress:e.progress,assignedTo:e.assignedTo})}),r.jsx(le,{children:e.price?`${e.price} ₽`:"—"}),r.jsx(le,{children:e.estimatedTime?`${e.estimatedTime} ч`:"—"}),r.jsx(le,{children:r.jsx(zi,{startDate:e.startDate,endDate:e.endDate,actualStartDate:e.actualStartDate,actualEndDate:e.actualEndDate,formatDate:s})}),r.jsx(le,{children:r.jsx(Ki,{assignedTo:e.assignedTo,assignedToNames:e.assignedToNames,getAssignedUserName:o})}),r.jsx(le,{children:r.jsx(Yi,{progress:e.progress||0,onProgressChange:j=>{const x=S(g({},e),{progress:j});x.progress===100&&!x.actualEndDate&&(x.actualEndDate=new Date().toISOString()),a(t.id,x)}})}),n==="manager"&&r.jsxs(le,{children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx(ee,{variant:"ghost",size:"sm",className:"text-slate-500 hover:text-slate-700 hover:bg-slate-100",onClick:()=>p(!0),children:r.jsx(L,{name:"Edit",size:16})}),r.jsx(ee,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>i(t.id,e.id),children:r.jsx(L,{name:"Trash2",size:16})})]}),r.jsx(Rc,{isOpen:m,onClose:()=>p(!1),task:e,projectId:t.id,onSave:a})]})]})},Ic=({project:e,userRole:t,formatDate:n,getAssignedUserName:s,onTaskUpdate:o,onDeleteTask:a})=>r.jsx("div",{className:"p-4",children:r.jsxs(Un,{children:[r.jsx(zn,{children:r.jsxs(mt,{children:[r.jsx(ie,{children:"Название"}),r.jsx(ie,{children:"Статус"}),r.jsx(ie,{children:"Стоимость"}),r.jsx(ie,{children:"Время"}),r.jsx(ie,{children:"Даты"}),r.jsx(ie,{children:"Исполнитель"}),r.jsx(ie,{children:"Прогресс"}),t==="manager"&&r.jsx(ie,{children:"Действия"})]})}),r.jsx(Kn,{children:e.tasks.map(i=>r.jsx(Pc,{task:i,project:e,userRole:t,formatDate:n,getAssignedUserName:s,onTaskUpdate:o,onDeleteTask:a},i.id))})]})}),Oc=({project:e,onProjectUpdate:t})=>{const[n,s]=d.useState({name:"",description:"",price:0,estimatedTime:0,startDate:"",endDate:"",assignedToNames:[],progress:0}),[o,a]=d.useState(""),[i,l]=d.useState(!1),c=f=>{const{name:m,value:p}=f.target;if(m==="assignedToNames"){a(p);return}let v=p;(m==="price"||m==="estimatedTime"||m==="progress")&&(v=parseFloat(p)||0),s(j=>S(g({},j),{[m]:v}))},u=()=>{if(!n.name){Ce({title:"Ошибка",description:"Название задачи обязательно",variant:"destructive"});return}const f=o?o.split(",").map(v=>v.trim()):[],m=S(g({id:`task-${Date.now()}`},n),{assignedToNames:f,assignedTo:f.length>0?f:"",actualStartDate:null,actualEndDate:null}),p=S(g({},e),{tasks:[...e.tasks,m]});t(p),s({name:"",description:"",price:0,estimatedTime:0,startDate:"",endDate:"",assignedToNames:[],progress:0}),a(""),Ce({title:"Задача добавлена",description:`"${m.name}" добавлена в проект "${e.name}"`})};return r.jsxs("div",{className:"p-4 border-t",children:[r.jsx("h3",{className:"font-medium mb-4",children:"Добавить задачу"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(U,{htmlFor:"name",children:"Название"}),r.jsx(Q,{id:"name",name:"name",value:n.name,onChange:c,placeholder:"Название задачи"})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"description",children:"Описание"}),r.jsx(Vt,{id:"description",name:"description",value:n.description,onChange:c,placeholder:"Описание задачи",rows:3})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"price",children:"Цена (₽)"}),r.jsx(Q,{id:"price",name:"price",type:"number",value:n.price===0?"":n.price,onChange:c,placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"assignedToNames",children:"Исполнители (через запятую)"}),r.jsx(Q,{id:"assignedToNames",name:"assignedToNames",value:o,onChange:c,placeholder:"Иванов И.И., Петров П.П."})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"estimatedTime",children:"Время (ч)"}),r.jsx(Q,{id:"estimatedTime",name:"estimatedTime",type:"number",value:n.estimatedTime===0?"":n.estimatedTime,onChange:c,placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"progress",children:"Прогресс выполнения (%)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Q,{id:"progress",name:"progress",type:"number",min:"0",max:"100",value:n.progress===0?"":n.progress,onChange:c,placeholder:"0"}),r.jsx("input",{type:"range",id:"progress-slider",name:"progress",min:"0",max:"100",step:"5",value:n.progress||0,onChange:c,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"startDate",children:"Плановая дата начала"}),r.jsx(Q,{id:"startDate",name:"startDate",type:"date",value:n.startDate,onChange:c})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"endDate",children:"Плановая дата окончания"}),r.jsx(Q,{id:"endDate",name:"endDate",type:"date",value:n.endDate,onChange:c})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(ee,{type:"button",onClick:u,className:"w-full",children:"Добавить задачу"})})]})]})},_c=({project:e,isExpanded:t,onExpandToggle:n,userRole:s,formatDate:o,getAssignedUserName:a,onTaskUpdate:i,onProjectUpdate:l,onDeleteTask:c,onDeleteProject:u})=>r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsx(Mi,{type:"single",collapsible:!0,value:t?e.id:void 0,onValueChange:f=>n(f||null),children:r.jsxs(gs,{value:e.id,children:[r.jsx($i,{project:e}),r.jsxs(Wn,{children:[r.jsx(Bi,{projectId:e.id,tasksCount:e.tasks.length,onDeleteProject:u,userRole:s}),r.jsx(Ic,{project:e,userRole:s,formatDate:o,getAssignedUserName:a,onTaskUpdate:i,onDeleteTask:c}),s==="manager"&&r.jsx(Oc,{project:e,onProjectUpdate:l})]})]})})});var po="AlertDialog",[Mc,af]=Ke(po,[Rs]),De=Rs(),ho=e=>{const o=e,{__scopeAlertDialog:t}=o,n=T(o,["__scopeAlertDialog"]),s=De(t);return r.jsx(Ks,S(g(g({},s),n),{modal:!0}))};ho.displayName=po;var kc="AlertDialogTrigger",Fc=d.forwardRef((e,t)=>{const a=e,{__scopeAlertDialog:n}=a,s=T(a,["__scopeAlertDialog"]),o=De(n);return r.jsx(Jl,S(g(g({},o),s),{ref:t}))});Fc.displayName=kc;var Lc="AlertDialogPortal",go=e=>{const o=e,{__scopeAlertDialog:t}=o,n=T(o,["__scopeAlertDialog"]),s=De(t);return r.jsx(Ys,g(g({},s),n))};go.displayName=Lc;var $c="AlertDialogOverlay",xo=d.forwardRef((e,t)=>{const a=e,{__scopeAlertDialog:n}=a,s=T(a,["__scopeAlertDialog"]),o=De(n);return r.jsx(Zn,S(g(g({},o),s),{ref:t}))});xo.displayName=$c;var Ze="AlertDialogContent",[Bc,Vc]=Mc(Ze),Hc=Za("AlertDialogContent"),vo=d.forwardRef((e,t)=>{const u=e,{__scopeAlertDialog:n,children:s}=u,o=T(u,["__scopeAlertDialog","children"]),a=De(n),i=d.useRef(null),l=q(t,i),c=d.useRef(null);return r.jsx(Yl,{contentName:Ze,titleName:yo,docsSlug:"alert-dialog",children:r.jsx(Bc,{scope:n,cancelRef:c,children:r.jsxs(Qn,S(g(g({role:"alertdialog"},a),o),{ref:l,onOpenAutoFocus:W(o.onOpenAutoFocus,f=>{var m;f.preventDefault(),(m=c.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[r.jsx(Hc,{children:s}),r.jsx(Uc,{contentRef:i})]}))})})});vo.displayName=Ze;var yo="AlertDialogTitle",wo=d.forwardRef((e,t)=>{const a=e,{__scopeAlertDialog:n}=a,s=T(a,["__scopeAlertDialog"]),o=De(n);return r.jsx(er,S(g(g({},o),s),{ref:t}))});wo.displayName=yo;var jo="AlertDialogDescription",bo=d.forwardRef((e,t)=>{const a=e,{__scopeAlertDialog:n}=a,s=T(a,["__scopeAlertDialog"]),o=De(n);return r.jsx(tr,S(g(g({},o),s),{ref:t}))});bo.displayName=jo;var Wc="AlertDialogAction",No=d.forwardRef((e,t)=>{const a=e,{__scopeAlertDialog:n}=a,s=T(a,["__scopeAlertDialog"]),o=De(n);return r.jsx(nr,S(g(g({},o),s),{ref:t}))});No.displayName=Wc;var So="AlertDialogCancel",Co=d.forwardRef((e,t)=>{const l=e,{__scopeAlertDialog:n}=l,s=T(l,["__scopeAlertDialog"]),{cancelRef:o}=Vc(So,n),a=De(n),i=q(t,o);return r.jsx(nr,S(g(g({},a),s),{ref:i}))});Co.displayName=So;var Uc=({contentRef:e})=>{const t=`\`${Ze}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ze}\` by passing a \`${jo}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ze}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},zc=ho,Kc=go,To=xo,Ao=vo,Do=No,Eo=Co,Ro=wo,Po=bo;const Yc=zc,Gc=Kc,Io=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(To,S(g({className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e)},t),{ref:n}))});Io.displayName=To.displayName;const Oo=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsxs(Gc,{children:[r.jsx(Io,{}),r.jsx(Ao,g({ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e)},t))]})});Oo.displayName=Ao.displayName;const _o=n=>{var s=n,{className:e}=s,t=T(s,["className"]);return r.jsx("div",g({className:$("flex flex-col space-y-2 text-center sm:text-left",e)},t))};_o.displayName="AlertDialogHeader";const Mo=n=>{var s=n,{className:e}=s,t=T(s,["className"]);return r.jsx("div",g({className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e)},t))};Mo.displayName="AlertDialogFooter";const ko=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Ro,g({ref:n,className:$("text-lg font-semibold",e)},t))});ko.displayName=Ro.displayName;const Fo=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Po,g({ref:n,className:$("text-sm text-muted-foreground",e)},t))});Fo.displayName=Po.displayName;const Lo=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Do,g({ref:n,className:$(Kr(),e)},t))});Lo.displayName=Do.displayName;const $o=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Eo,g({ref:n,className:$(Kr({variant:"outline"}),"mt-2 sm:mt-0",e)},t))});$o.displayName=Eo.displayName;const jn=({isOpen:e,onClose:t,onConfirm:n,title:s,description:o})=>r.jsx(Yc,{open:e,onOpenChange:t,children:r.jsxs(Oo,{children:[r.jsxs(_o,{children:[r.jsxs(ko,{className:"flex items-center text-red-600",children:[r.jsx(L,{name:"AlertTriangle",className:"mr-2 h-5 w-5"}),s]}),r.jsx(Fo,{children:o})]}),r.jsxs(Mo,{children:[r.jsx($o,{onClick:t,children:"Отмена"}),r.jsx(Lo,{onClick:()=>{n(),t()},className:"bg-red-600 hover:bg-red-700",children:"Удалить"})]})]})}),Xc=({isDeleteProjectDialogOpen:e,isDeleteTaskDialogOpen:t,onCloseProjectDialog:n,onCloseTaskDialog:s,onConfirmDeleteProject:o,onConfirmDeleteTask:a})=>r.jsxs(r.Fragment,{children:[r.jsx(jn,{isOpen:e,onClose:n,onConfirm:o,title:"Удалить проект",description:"Вы уверены, что хотите удалить проект? Это действие нельзя отменить. Все задачи, связанные с этим проектом, также будут удалены."}),r.jsx(jn,{isOpen:t,onClose:s,onConfirm:a,title:"Удалить задачу",description:"Вы уверены, что хотите удалить задачу? Это действие нельзя отменить."})]}),qc=()=>r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-slate-500",children:"Проекты отсутствуют"}),r.jsx("p",{className:"text-slate-400 text-sm mt-2",children:'Создайте новый проект или импортируйте существующие через вкладку "Импорт данных"'})]}),Jc=({projects:e,onProjectsUpdated:t,userRole:n="manager",onUpdateProject:s,onDeleteProject:o,users:a=[]})=>{const[i,l]=d.useState(null),[c,u]=d.useState(null),[f,m]=d.useState(null),[p,v]=d.useState(!1),[j,x]=d.useState(!1),h=A=>{l(A)},w=A=>{u(A),v(!0)},N=(A,_)=>{m({projectId:A,taskId:_}),x(!0)},y=()=>{if(c){if(o)o(c);else if(t){const A=e.filter(_=>_.id!==c);t(A)}Ce({title:"Проект удален",description:"Проект и все его задачи были успешно удалены"}),v(!1),u(null)}},b=()=>{if(f){const{projectId:A,taskId:_}=f,M=e.map(P=>P.id===A?S(g({},P),{tasks:P.tasks.filter(R=>R.id!==_)}):P);if(s){const P=M.find(R=>R.id===A);P&&s(P)}else t&&t(M);Ce({title:"Задача удалена",description:"Задача была успешно удалена из проекта"})}x(!1),m(null)},C=(A,_)=>{const M=e.map(P=>{if(P.id===A){const R=P.tasks.map(k=>k.id===_.id?_:k);return S(g({},P),{tasks:R})}return P});if(s){const P=M.find(R=>R.id===A);P&&s(P)}else t&&t(M)},D=A=>{if(s)s(A);else if(t){const _=e.map(M=>M.id===A.id?A:M);t(_)}},I=A=>a&&a.length>0?jr(A,a):jr(A);return e.length===0?r.jsx(qc,{}):r.jsxs("div",{className:"space-y-6",children:[e.map(A=>r.jsx(_c,{project:A,isExpanded:i===A.id,onExpandToggle:h,userRole:n,formatDate:gn,getAssignedUserName:I,onTaskUpdate:C,onProjectUpdate:D,onDeleteTask:N,onDeleteProject:w},A.id)),r.jsx(Xc,{isDeleteProjectDialogOpen:p,isDeleteTaskDialogOpen:j,onCloseProjectDialog:()=>v(!1),onCloseTaskDialog:()=>x(!1),onConfirmDeleteProject:y,onConfirmDeleteTask:b})]})},Zc=({onImport:e})=>{const[t,n]=d.useState(""),[s,o]=d.useState(""),[a,i]=d.useState(""),[l,c]=d.useState(""),u=()=>{if(!t.trim()){alert("Название проекта обязательно");return}const f={id:`project-${Date.now()}`,name:t,description:s,startDate:a,endDate:l,tasks:[],progress:0,createdAt:new Date().toISOString()};e(f),n(""),o(""),i(""),c("")};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Создать новый проект"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Название проекта *"}),r.jsx(Q,{value:t,onChange:f=>n(f.target.value),placeholder:"Введите название проекта"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Описание"}),r.jsx(Vt,{value:s,onChange:f=>o(f.target.value),placeholder:"Введите описание проекта",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Дата начала"}),r.jsx(Q,{type:"date",value:a,onChange:f=>i(f.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Дата окончания"}),r.jsx(Q,{type:"date",value:l,onChange:f=>c(f.target.value)})]})]})]}),r.jsxs(ee,{onClick:u,className:"w-full",children:[r.jsx(L,{name:"Plus",className:"mr-2 h-4 w-4"}),"Создать проект"]})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Импорт из файла"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx(L,{name:"Upload",className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Перетащите файл проекта сюда или нажмите для выбора"}),r.jsx(ee,{variant:"outline",className:"mt-4",children:"Выбрать файл"}),r.jsx("p",{className:"mt-2 text-xs text-gray-400",children:"Поддерживаемые форматы: .json, .xlsx, .csv"})]})]})]})},Qc=({exportType:e,onExportTypeChange:t})=>r.jsxs("div",{className:"space-y-3",children:[r.jsx(U,{children:"Тип отчета"}),r.jsxs(Jr,{value:e,onValueChange:t,className:"flex flex-col space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{value:"all",id:"all"}),r.jsx(U,{htmlFor:"all",children:"Полный отчет по всем проектам"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{value:"employee",id:"employee"}),r.jsx(U,{htmlFor:"employee",children:"Отчет по сотруднику"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{value:"project",id:"project"}),r.jsx(U,{htmlFor:"project",children:"Отчет по проекту"})]})]})]}),ed=["top","right","bottom","left"],Oe=Math.min,ce=Math.max,Mt=Math.round,Tt=Math.floor,ye=e=>({x:e,y:e}),td={left:"right",right:"left",bottom:"top",top:"bottom"},nd={start:"end",end:"start"};function bn(e,t,n){return ce(e,Oe(t,n))}function Te(e,t){return typeof e=="function"?e(t):e}function Ae(e){return e.split("-")[0]}function nt(e){return e.split("-")[1]}function ir(e){return e==="x"?"y":"x"}function lr(e){return e==="y"?"height":"width"}function _e(e){return["top","bottom"].includes(Ae(e))?"y":"x"}function cr(e){return ir(_e(e))}function rd(e,t,n){n===void 0&&(n=!1);const s=nt(e),o=cr(e),a=lr(o);let i=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=kt(i)),[i,kt(i)]}function sd(e){const t=kt(e);return[Nn(e),t,Nn(t)]}function Nn(e){return e.replace(/start|end/g,t=>nd[t])}function od(e,t,n){const s=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:s:t?s:o;case"left":case"right":return t?a:i;default:return[]}}function ad(e,t,n,s){const o=nt(e);let a=od(Ae(e),n==="start",s);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Nn)))),a}function kt(e){return e.replace(/left|right|bottom|top/g,t=>td[t])}function id(e){return g({top:0,right:0,bottom:0,left:0},e)}function Bo(e){return typeof e!="number"?id(e):{top:e,right:e,bottom:e,left:e}}function Ft(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}function Ir(e,t,n){let{reference:s,floating:o}=e;const a=_e(t),i=cr(t),l=lr(i),c=Ae(t),u=a==="y",f=s.x+s.width/2-o.width/2,m=s.y+s.height/2-o.height/2,p=s[l]/2-o[l]/2;let v;switch(c){case"top":v={x:f,y:s.y-o.height};break;case"bottom":v={x:f,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:m};break;case"left":v={x:s.x-o.width,y:m};break;default:v={x:s.x,y:s.y}}switch(nt(t)){case"start":v[i]-=p*(n&&u?-1:1);break;case"end":v[i]+=p*(n&&u?-1:1);break}return v}const ld=(e,t,n)=>ue(void 0,null,function*(){const{placement:s="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=yield i.isRTL==null?void 0:i.isRTL(t);let u=yield i.getElementRects({reference:e,floating:t,strategy:o}),{x:f,y:m}=Ir(u,s,c),p=s,v={},j=0;for(let x=0;x<l.length;x++){const{name:h,fn:w}=l[x],{x:N,y,data:b,reset:C}=yield w({x:f,y:m,initialPlacement:s,placement:p,strategy:o,middlewareData:v,rects:u,platform:i,elements:{reference:e,floating:t}});f=N!=null?N:f,m=y!=null?y:m,v=S(g({},v),{[h]:g(g({},v[h]),b)}),C&&j<=50&&(j++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?yield i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:f,y:m}=Ir(u,p,c)),x=-1)}return{x:f,y:m,placement:p,strategy:o,middlewareData:v}});function pt(e,t){return ue(this,null,function*(){var n;t===void 0&&(t={});const{x:s,y:o,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:p=!1,padding:v=0}=Te(t,e),j=Bo(v),h=l[p?m==="floating"?"reference":"floating":m],w=Ft(yield a.getClippingRect({element:(n=yield a.isElement==null?void 0:a.isElement(h))==null||n?h:h.contextElement||(yield a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),N=m==="floating"?{x:s,y:o,width:i.floating.width,height:i.floating.height}:i.reference,y=yield a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating),b=(yield a.isElement==null?void 0:a.isElement(y))?(yield a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},C=Ft(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:y,strategy:c}):N);return{top:(w.top-C.top+j.top)/b.y,bottom:(C.bottom-w.bottom+j.bottom)/b.y,left:(w.left-C.left+j.left)/b.x,right:(C.right-w.right+j.right)/b.x}})}const cd=e=>({name:"arrow",options:e,fn(n){return ue(this,null,function*(){const{x:s,y:o,placement:a,rects:i,platform:l,elements:c,middlewareData:u}=n,{element:f,padding:m=0}=Te(e,n)||{};if(f==null)return{};const p=Bo(m),v={x:s,y:o},j=cr(a),x=lr(j),h=yield l.getDimensions(f),w=j==="y",N=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",C=i.reference[x]+i.reference[j]-v[j]-i.floating[x],D=v[j]-i.reference[j],I=yield l.getOffsetParent==null?void 0:l.getOffsetParent(f);let A=I?I[b]:0;(!A||!(yield l.isElement==null?void 0:l.isElement(I)))&&(A=c.floating[b]||i.floating[x]);const _=C/2-D/2,M=A/2-h[x]/2-1,P=Oe(p[N],M),R=Oe(p[y],M),k=P,K=A-h[x]-R,B=A/2-h[x]/2+_,F=bn(k,B,K),H=!u.arrow&&nt(a)!=null&&B!==F&&i.reference[x]/2-(B<k?P:R)-h[x]/2<0,E=H?B<k?B-k:B-K:0;return{[j]:v[j]+E,data:g({[j]:F,centerOffset:B-F-E},H&&{alignmentOffset:E}),reset:H}})}}),dd=function(e){return e===void 0&&(e={}),{name:"flip",options:e,fn(n){return ue(this,null,function*(){var s,o;const{placement:a,middlewareData:i,rects:l,initialPlacement:c,platform:u,elements:f}=n,B=Te(e,n),{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:h=!0}=B,w=T(B,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const N=Ae(a),y=_e(c),b=Ae(c)===c,C=yield u.isRTL==null?void 0:u.isRTL(f.floating),D=v||(b||!h?[kt(c)]:sd(c)),I=x!=="none";!v&&I&&D.push(...ad(c,h,x,C));const A=[c,...D],_=yield pt(n,w),M=[];let P=((o=i.flip)==null?void 0:o.overflows)||[];if(m&&M.push(_[N]),p){const F=rd(a,l,C);M.push(_[F[0]],_[F[1]])}if(P=[...P,{placement:a,overflows:M}],!M.every(F=>F<=0)){var R,k;const F=(((R=i.flip)==null?void 0:R.index)||0)+1,H=A[F];if(H)return{data:{index:F,overflows:P},reset:{placement:H}};let E=(k=P.filter(z=>z.overflows[0]<=0).sort((z,J)=>z.overflows[1]-J.overflows[1])[0])==null?void 0:k.placement;if(!E)switch(j){case"bestFit":{var K;const z=(K=P.filter(J=>{if(I){const ne=_e(J.placement);return ne===y||ne==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(ne=>ne>0).reduce((ne,Ee)=>ne+Ee,0)]).sort((J,ne)=>J[1]-ne[1])[0])==null?void 0:K[0];z&&(E=z);break}case"initialPlacement":E=c;break}if(a!==E)return{reset:{placement:E}}}return{}})}}};function Or(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _r(e){return ed.some(t=>e[t]>=0)}const ud=function(e){return e===void 0&&(e={}),{name:"hide",options:e,fn(n){return ue(this,null,function*(){const{rects:s}=n,i=Te(e,n),{strategy:o="referenceHidden"}=i,a=T(i,["strategy"]);switch(o){case"referenceHidden":{const l=yield pt(n,S(g({},a),{elementContext:"reference"})),c=Or(l,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:_r(c)}}}case"escaped":{const l=yield pt(n,S(g({},a),{altBoundary:!0})),c=Or(l,s.floating);return{data:{escapedOffsets:c,escaped:_r(c)}}}default:return{}}})}}};function fd(e,t){return ue(this,null,function*(){const{placement:n,platform:s,elements:o}=e,a=yield s.isRTL==null?void 0:s.isRTL(o.floating),i=Ae(n),l=nt(n),c=_e(n)==="y",u=["left","top"].includes(i)?-1:1,f=a&&c?-1:1,m=Te(t,e);let{mainAxis:p,crossAxis:v,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof j=="number"&&(v=l==="end"?j*-1:j),c?{x:v*f,y:p*u}:{x:p*u,y:v*f}})}const md=function(e){return e===void 0&&(e=0),{name:"offset",options:e,fn(n){return ue(this,null,function*(){var s,o;const{x:a,y:i,placement:l,middlewareData:c}=n,u=yield fd(n,e);return l===((s=c.offset)==null?void 0:s.placement)&&(o=c.arrow)!=null&&o.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:S(g({},u),{placement:l})}})}}},pd=function(e){return e===void 0&&(e={}),{name:"shift",options:e,fn(n){return ue(this,null,function*(){const{x:s,y:o,placement:a}=n,w=Te(e,n),{mainAxis:i=!0,crossAxis:l=!1,limiter:c={fn:N=>{let{x:y,y:b}=N;return{x:y,y:b}}}}=w,u=T(w,["mainAxis","crossAxis","limiter"]),f={x:s,y:o},m=yield pt(n,u),p=_e(Ae(a)),v=ir(p);let j=f[v],x=f[p];if(i){const N=v==="y"?"top":"left",y=v==="y"?"bottom":"right",b=j+m[N],C=j-m[y];j=bn(b,j,C)}if(l){const N=p==="y"?"top":"left",y=p==="y"?"bottom":"right",b=x+m[N],C=x-m[y];x=bn(b,x,C)}const h=c.fn(S(g({},n),{[v]:j,[p]:x}));return S(g({},h),{data:{x:h.x-s,y:h.y-o,enabled:{[v]:i,[p]:l}}})})}}},hd=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:o,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Te(e,t),f={x:n,y:s},m=_e(o),p=ir(m);let v=f[p],j=f[m];const x=Te(l,t),h=typeof x=="number"?{mainAxis:x,crossAxis:0}:g({mainAxis:0,crossAxis:0},x);if(c){const y=p==="y"?"height":"width",b=a.reference[p]-a.floating[y]+h.mainAxis,C=a.reference[p]+a.reference[y]-h.mainAxis;v<b?v=b:v>C&&(v=C)}if(u){var w,N;const y=p==="y"?"width":"height",b=["top","left"].includes(Ae(o)),C=a.reference[m]-a.floating[y]+(b&&((w=i.offset)==null?void 0:w[m])||0)+(b?0:h.crossAxis),D=a.reference[m]+a.reference[y]+(b?0:((N=i.offset)==null?void 0:N[m])||0)-(b?h.crossAxis:0);j<C?j=C:j>D&&(j=D)}return{[p]:v,[m]:j}}}},gd=function(e){return e===void 0&&(e={}),{name:"size",options:e,fn(n){return ue(this,null,function*(){var s,o;const{placement:a,rects:i,platform:l,elements:c}=n,P=Te(e,n),{apply:u=()=>{}}=P,f=T(P,["apply"]),m=yield pt(n,f),p=Ae(a),v=nt(a),j=_e(a)==="y",{width:x,height:h}=i.floating;let w,N;p==="top"||p==="bottom"?(w=p,N=v===((yield l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(N=p,w=v==="end"?"top":"bottom");const y=h-m.top-m.bottom,b=x-m.left-m.right,C=Oe(h-m[w],y),D=Oe(x-m[N],b),I=!n.middlewareData.shift;let A=C,_=D;if((s=n.middlewareData.shift)!=null&&s.enabled.x&&(_=b),(o=n.middlewareData.shift)!=null&&o.enabled.y&&(A=y),I&&!v){const R=ce(m.left,0),k=ce(m.right,0),K=ce(m.top,0),B=ce(m.bottom,0);j?_=x-2*(R!==0||k!==0?R+k:ce(m.left,m.right)):A=h-2*(K!==0||B!==0?K+B:ce(m.top,m.bottom))}yield u(S(g({},n),{availableWidth:_,availableHeight:A}));const M=yield l.getDimensions(c.floating);return x!==M.width||h!==M.height?{reset:{rects:!0}}:{}})}}};function Gt(){return typeof window!="undefined"}function rt(e){return Vo(e)?(e.nodeName||"").toLowerCase():"#document"}function de(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function je(e){var t;return(t=(Vo(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vo(e){return Gt()?e instanceof Node||e instanceof de(e).Node:!1}function pe(e){return Gt()?e instanceof Element||e instanceof de(e).Element:!1}function we(e){return Gt()?e instanceof HTMLElement||e instanceof de(e).HTMLElement:!1}function Mr(e){return!Gt()||typeof ShadowRoot=="undefined"?!1:e instanceof ShadowRoot||e instanceof de(e).ShadowRoot}function gt(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=he(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function xd(e){return["table","td","th"].includes(rt(e))}function Xt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function dr(e){const t=ur(),n=pe(e)?he(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function vd(e){let t=Me(e);for(;we(t)&&!et(t);){if(dr(t))return t;if(Xt(t))return null;t=Me(t)}return null}function ur(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function et(e){return["html","body","#document"].includes(rt(e))}function he(e){return de(e).getComputedStyle(e)}function qt(e){return pe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Me(e){if(rt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Mr(e)&&e.host||je(e);return Mr(t)?t.host:t}function Ho(e){const t=Me(e);return et(t)?e.ownerDocument?e.ownerDocument.body:e.body:we(t)&&gt(t)?t:Ho(t)}function ht(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Ho(e),a=o===((s=e.ownerDocument)==null?void 0:s.body),i=de(o);if(a){const l=Sn(i);return t.concat(i,i.visualViewport||[],gt(o)?o:[],l&&n?ht(l):[])}return t.concat(o,ht(o,[],n))}function Sn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Wo(e){const t=he(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const o=we(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:s,l=Mt(n)!==a||Mt(s)!==i;return l&&(n=a,s=i),{width:n,height:s,$:l}}function fr(e){return pe(e)?e:e.contextElement}function Qe(e){const t=fr(e);if(!we(t))return ye(1);const n=t.getBoundingClientRect(),{width:s,height:o,$:a}=Wo(t);let i=(a?Mt(n.width):n.width)/s,l=(a?Mt(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const yd=ye(0);function Uo(e){const t=de(e);return!ur()||!t.visualViewport?yd:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function wd(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==de(e)?!1:t}function We(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=fr(e);let i=ye(1);t&&(s?pe(s)&&(i=Qe(s)):i=Qe(e));const l=wd(a,n,s)?Uo(a):ye(0);let c=(o.left+l.x)/i.x,u=(o.top+l.y)/i.y,f=o.width/i.x,m=o.height/i.y;if(a){const p=de(a),v=s&&pe(s)?de(s):s;let j=p,x=Sn(j);for(;x&&s&&v!==j;){const h=Qe(x),w=x.getBoundingClientRect(),N=he(x),y=w.left+(x.clientLeft+parseFloat(N.paddingLeft))*h.x,b=w.top+(x.clientTop+parseFloat(N.paddingTop))*h.y;c*=h.x,u*=h.y,f*=h.x,m*=h.y,c+=y,u+=b,j=de(x),x=Sn(j)}}return Ft({width:f,height:m,x:c,y:u})}function mr(e,t){const n=qt(e).scrollLeft;return t?t.left+n:We(je(e)).left+n}function zo(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=s.left+t.scrollLeft-(n?0:mr(e,s)),a=s.top+t.scrollTop;return{x:o,y:a}}function jd(e){let{elements:t,rect:n,offsetParent:s,strategy:o}=e;const a=o==="fixed",i=je(s),l=t?Xt(t.floating):!1;if(s===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=ye(1);const f=ye(0),m=we(s);if((m||!m&&!a)&&((rt(s)!=="body"||gt(i))&&(c=qt(s)),we(s))){const v=We(s);u=Qe(s),f.x=v.x+s.clientLeft,f.y=v.y+s.clientTop}const p=i&&!m&&!a?zo(i,c,!0):ye(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function bd(e){return Array.from(e.getClientRects())}function Nd(e){const t=je(e),n=qt(e),s=e.ownerDocument.body,o=ce(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=ce(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+mr(e);const l=-n.scrollTop;return he(s).direction==="rtl"&&(i+=ce(t.clientWidth,s.clientWidth)-o),{width:o,height:a,x:i,y:l}}function Sd(e,t){const n=de(e),s=je(e),o=n.visualViewport;let a=s.clientWidth,i=s.clientHeight,l=0,c=0;if(o){a=o.width,i=o.height;const u=ur();(!u||u&&t==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:l,y:c}}function Cd(e,t){const n=We(e,!0,t==="fixed"),s=n.top+e.clientTop,o=n.left+e.clientLeft,a=we(e)?Qe(e):ye(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=o*a.x,u=s*a.y;return{width:i,height:l,x:c,y:u}}function kr(e,t,n){let s;if(t==="viewport")s=Sd(e,n);else if(t==="document")s=Nd(je(e));else if(pe(t))s=Cd(t,n);else{const o=Uo(e);s={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Ft(s)}function Ko(e,t){const n=Me(e);return n===t||!pe(n)||et(n)?!1:he(n).position==="fixed"||Ko(n,t)}function Td(e,t){const n=t.get(e);if(n)return n;let s=ht(e,[],!1).filter(l=>pe(l)&&rt(l)!=="body"),o=null;const a=he(e).position==="fixed";let i=a?Me(e):e;for(;pe(i)&&!et(i);){const l=he(i),c=dr(i);!c&&l.position==="fixed"&&(o=null),(a?!c&&!o:!c&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||gt(i)&&!c&&Ko(e,i))?s=s.filter(f=>f!==i):o=l,i=Me(i)}return t.set(e,s),s}function Ad(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const i=[...n==="clippingAncestors"?Xt(t)?[]:Td(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((u,f)=>{const m=kr(t,f,o);return u.top=ce(m.top,u.top),u.right=Oe(m.right,u.right),u.bottom=Oe(m.bottom,u.bottom),u.left=ce(m.left,u.left),u},kr(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Dd(e){const{width:t,height:n}=Wo(e);return{width:t,height:n}}function Ed(e,t,n){const s=we(t),o=je(t),a=n==="fixed",i=We(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=ye(0);if(s||!s&&!a)if((rt(t)!=="body"||gt(o))&&(l=qt(t)),s){const p=We(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else o&&(c.x=mr(o));const u=o&&!s&&!a?zo(o,l):ye(0),f=i.left+l.scrollLeft-c.x-u.x,m=i.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function mn(e){return he(e).position==="static"}function Fr(e,t){if(!we(e)||he(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return je(e)===n&&(n=n.ownerDocument.body),n}function Yo(e,t){const n=de(e);if(Xt(e))return n;if(!we(e)){let o=Me(e);for(;o&&!et(o);){if(pe(o)&&!mn(o))return o;o=Me(o)}return n}let s=Fr(e,t);for(;s&&xd(s)&&mn(s);)s=Fr(s,t);return s&&et(s)&&mn(s)&&!dr(s)?n:s||vd(e)||n}const Rd=function(e){return ue(this,null,function*(){const t=this.getOffsetParent||Yo,n=this.getDimensions,s=yield n(e.floating);return{reference:Ed(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}})};function Pd(e){return he(e).direction==="rtl"}const Id={convertOffsetParentRelativeRectToViewportRelativeRect:jd,getDocumentElement:je,getClippingRect:Ad,getOffsetParent:Yo,getElementRects:Rd,getClientRects:bd,getDimensions:Dd,getScale:Qe,isElement:pe,isRTL:Pd};function Go(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Od(e,t){let n=null,s;const o=je(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:f,top:m,width:p,height:v}=u;if(l||t(),!p||!v)return;const j=Tt(m),x=Tt(o.clientWidth-(f+p)),h=Tt(o.clientHeight-(m+v)),w=Tt(f),y={rootMargin:-j+"px "+-x+"px "+-h+"px "+-w+"px",threshold:ce(0,Oe(1,c))||1};let b=!0;function C(D){const I=D[0].intersectionRatio;if(I!==c){if(!b)return i();I?i(!1,I):s=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!Go(u,e.getBoundingClientRect())&&i(),b=!1}try{n=new IntersectionObserver(C,S(g({},y),{root:o.ownerDocument}))}catch(D){n=new IntersectionObserver(C,y)}n.observe(e)}return i(!0),a}function _d(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=fr(e),f=o||a?[...u?ht(u):[],...ht(t)]:[];f.forEach(w=>{o&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const m=u&&l?Od(u,n):null;let p=-1,v=null;i&&(v=new ResizeObserver(w=>{let[N]=w;N&&N.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=v)==null||y.observe(t)})),n()}),u&&!c&&v.observe(u),v.observe(t));let j,x=c?We(e):null;c&&h();function h(){const w=We(e);x&&!Go(x,w)&&n(),x=w,j=requestAnimationFrame(h)}return n(),()=>{var w;f.forEach(N=>{o&&N.removeEventListener("scroll",n),a&&N.removeEventListener("resize",n)}),m==null||m(),(w=v)==null||w.disconnect(),v=null,c&&cancelAnimationFrame(j)}}const Md=md,kd=pd,Fd=dd,Ld=gd,$d=ud,Lr=cd,Bd=hd,Vd=(e,t,n)=>{const s=new Map,o=g({platform:Id},n),a=S(g({},o.platform),{_c:s});return ld(e,t,S(g({},o),{platform:a}))};var Rt=typeof document!="undefined"?d.useLayoutEffect:d.useEffect;function Lt(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Lt(e[s],t[s]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,o[s]))return!1;for(s=n;s--!==0;){const a=o[s];if(!(a==="_owner"&&e.$$typeof)&&!Lt(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Xo(e){return typeof window=="undefined"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $r(e,t){const n=Xo(e);return Math.round(t*n)/n}function pn(e){const t=d.useRef(e);return Rt(()=>{t.current=e}),t}function Hd(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:o,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,v]=d.useState(s);Lt(p,s)||v(s);const[j,x]=d.useState(null),[h,w]=d.useState(null),N=d.useCallback(E=>{E!==D.current&&(D.current=E,x(E))},[]),y=d.useCallback(E=>{E!==I.current&&(I.current=E,w(E))},[]),b=a||j,C=i||h,D=d.useRef(null),I=d.useRef(null),A=d.useRef(f),_=c!=null,M=pn(c),P=pn(o),R=pn(u),k=d.useCallback(()=>{if(!D.current||!I.current)return;const E={placement:t,strategy:n,middleware:p};P.current&&(E.platform=P.current),Vd(D.current,I.current,E).then(z=>{const J=S(g({},z),{isPositioned:R.current!==!1});K.current&&!Lt(A.current,J)&&(A.current=J,Mn.flushSync(()=>{m(J)}))})},[p,t,n,P,R]);Rt(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(E=>S(g({},E),{isPositioned:!1})))},[u]);const K=d.useRef(!1);Rt(()=>(K.current=!0,()=>{K.current=!1}),[]),Rt(()=>{if(b&&(D.current=b),C&&(I.current=C),b&&C){if(M.current)return M.current(b,C,k);k()}},[b,C,k,M,_]);const B=d.useMemo(()=>({reference:D,floating:I,setReference:N,setFloating:y}),[N,y]),F=d.useMemo(()=>({reference:b,floating:C}),[b,C]),H=d.useMemo(()=>{const E={position:n,left:0,top:0};if(!F.floating)return E;const z=$r(F.floating,f.x),J=$r(F.floating,f.y);return l?g(S(g({},E),{transform:"translate("+z+"px, "+J+"px)"}),Xo(F.floating)>=1.5&&{willChange:"transform"}):{position:n,left:z,top:J}},[n,l,F.floating,f.x,f.y]);return d.useMemo(()=>S(g({},f),{update:k,refs:B,elements:F,floatingStyles:H}),[f,k,B,F,H])}const Wd=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:o}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?Lr({element:s.current,padding:o}).fn(n):{}:s?Lr({element:s,padding:o}).fn(n):{}}}},Ud=(e,t)=>S(g({},Md(e)),{options:[e,t]}),zd=(e,t)=>S(g({},kd(e)),{options:[e,t]}),Kd=(e,t)=>S(g({},Bd(e)),{options:[e,t]}),Yd=(e,t)=>S(g({},Fd(e)),{options:[e,t]}),Gd=(e,t)=>S(g({},Ld(e)),{options:[e,t]}),Xd=(e,t)=>S(g({},$d(e)),{options:[e,t]}),qd=(e,t)=>S(g({},Wd(e)),{options:[e,t]});var Jd="Arrow",qo=d.forwardRef((e,t)=>{const i=e,{children:n,width:s=10,height:o=5}=i,a=T(i,["children","width","height"]);return r.jsx(V.svg,S(g({},a),{ref:t,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})}))});qo.displayName=Jd;var Zd=qo,pr="Popper",[Jo,Zo]=Ke(pr),[Qd,Qo]=Jo(pr),ea=e=>{const{__scopePopper:t,children:n}=e,[s,o]=d.useState(null);return r.jsx(Qd,{scope:t,anchor:s,onAnchorChange:o,children:n})};ea.displayName=pr;var ta="PopperAnchor",na=d.forwardRef((e,t)=>{const c=e,{__scopePopper:n,virtualRef:s}=c,o=T(c,["__scopePopper","virtualRef"]),a=Qo(ta,n),i=d.useRef(null),l=q(t,i);return d.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(V.div,S(g({},o),{ref:l}))});na.displayName=ta;var hr="PopperContent",[eu,tu]=Jo(hr),ra=d.forwardRef((e,t)=>{var O,Z,re,X,Y,G,oe,ae;const Ne=e,{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:j}=Ne,x=T(Ne,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),h=Qo(hr,n),[w,N]=d.useState(null),y=q(t,Se=>N(Se)),[b,C]=d.useState(null),D=Xr(b),I=(O=D==null?void 0:D.width)!=null?O:0,A=(Z=D==null?void 0:D.height)!=null?Z:0,_=s+(a!=="center"?"-"+a:""),M=typeof f=="number"?f:g({top:0,right:0,bottom:0,left:0},f),P=Array.isArray(u)?u:[u],R=P.length>0,k={padding:M,boundary:P.filter(ru),altBoundary:R},{refs:K,floatingStyles:B,placement:F,isPositioned:H,middlewareData:E}=Hd({strategy:"fixed",placement:_,whileElementsMounted:(...Se)=>_d(...Se,{animationFrame:v==="always"}),elements:{reference:h.anchor},middleware:[Ud({mainAxis:o+A,alignmentAxis:i}),c&&zd(g({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Kd():void 0},k)),c&&Yd(g({},k)),Gd(S(g({},k),{apply:({elements:Se,rects:Ye,availableWidth:lt,availableHeight:Ua})=>{const{width:za,height:Ka}=Ye.reference,xt=Se.floating.style;xt.setProperty("--radix-popper-available-width",`${lt}px`),xt.setProperty("--radix-popper-available-height",`${Ua}px`),xt.setProperty("--radix-popper-anchor-width",`${za}px`),xt.setProperty("--radix-popper-anchor-height",`${Ka}px`)}})),b&&qd({element:b,padding:l}),su({arrowWidth:I,arrowHeight:A}),p&&Xd(g({strategy:"referenceHidden"},k))]}),[z,J]=aa(F),ne=Pt(j);me(()=>{H&&(ne==null||ne())},[H,ne]);const Ee=(re=E.arrow)==null?void 0:re.x,ot=(X=E.arrow)==null?void 0:X.y,at=((Y=E.arrow)==null?void 0:Y.centerOffset)!==0,[be,it]=d.useState();return me(()=>{w&&it(window.getComputedStyle(w).zIndex)},[w]),r.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:g(S(g({},B),{transform:H?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(G=E.transformOrigin)==null?void 0:G.x,(oe=E.transformOrigin)==null?void 0:oe.y].join(" ")}),((ae=E.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:r.jsx(eu,{scope:n,placedSide:z,onArrowChange:C,arrowX:Ee,arrowY:ot,shouldHideArrow:at,children:r.jsx(V.div,S(g({"data-side":z,"data-align":J},x),{ref:y,style:S(g({},x.style),{animation:H?void 0:"none"})}))})})});ra.displayName=hr;var sa="PopperArrow",nu={top:"bottom",right:"left",bottom:"top",left:"right"},oa=d.forwardRef(function(t,n){const l=t,{__scopePopper:s}=l,o=T(l,["__scopePopper"]),a=tu(sa,s),i=nu[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(Zd,S(g({},o),{ref:n,style:S(g({},o.style),{display:"block"})}))})});oa.displayName=sa;function ru(e){return e!==null}var su=e=>({name:"transformOrigin",options:e,fn(t){var h,w,N,y,b;const{placement:n,rects:s,middlewareData:o}=t,i=((h=o.arrow)==null?void 0:h.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,f]=aa(n),m={start:"0%",center:"50%",end:"100%"}[f],p=((N=(w=o.arrow)==null?void 0:w.x)!=null?N:0)+l/2,v=((b=(y=o.arrow)==null?void 0:y.y)!=null?b:0)+c/2;let j="",x="";return u==="bottom"?(j=i?m:`${p}px`,x=`${-c}px`):u==="top"?(j=i?m:`${p}px`,x=`${s.floating.height+c}px`):u==="right"?(j=`${-c}px`,x=i?m:`${v}px`):u==="left"&&(j=`${s.floating.width+c}px`,x=i?m:`${v}px`),{data:{x:j,y:x}}}});function aa(e){const[t,n="center"]=e.split("-");return[t,n]}var ou=ea,au=na,iu=ra,lu=oa,cu=[" ","Enter","ArrowUp","ArrowDown"],du=[" ","Enter"],Ue="Select",[Jt,Zt,uu]=On(Ue),[st,lf]=Ke(Ue,[uu,Zo]),Qt=Zo(),[fu,ke]=st(Ue),[mu,pu]=st(Ue),ia=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:p,required:v,form:j}=e,x=Qt(t),[h,w]=d.useState(null),[N,y]=d.useState(null),[b,C]=d.useState(!1),D=kn(u),[I,A]=Ve({prop:s,defaultProp:o!=null?o:!1,onChange:a,caller:Ue}),[_,M]=Ve({prop:i,defaultProp:l,onChange:c,caller:Ue}),P=d.useRef(null),R=h?j||!!h.closest("form"):!0,[k,K]=d.useState(new Set),B=Array.from(k).map(F=>F.props.value).join(";");return r.jsx(ou,S(g({},x),{children:r.jsxs(fu,{required:v,scope:t,trigger:h,onTriggerChange:w,valueNode:N,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:C,contentId:Ie(),value:_,onValueChange:M,open:I,onOpenChange:A,dir:D,triggerPointerDownPosRef:P,disabled:p,children:[r.jsx(Jt.Provider,{scope:t,children:r.jsx(mu,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(F=>{K(H=>new Set(H).add(F))},[]),onNativeOptionRemove:d.useCallback(F=>{K(H=>{const E=new Set(H);return E.delete(F),E})},[]),children:n})}),R?r.jsxs(Pa,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:m,value:_,onChange:F=>M(F.target.value),disabled:p,form:j,children:[_===void 0?r.jsx("option",{value:""}):null,Array.from(k)]},B):null]})}))};ia.displayName=Ue;var la="SelectTrigger",ca=d.forwardRef((e,t)=>{const x=e,{__scopeSelect:n,disabled:s=!1}=x,o=T(x,["__scopeSelect","disabled"]),a=Qt(n),i=ke(la,n),l=i.disabled||s,c=q(t,i.onTriggerChange),u=Zt(n),f=d.useRef("touch"),[m,p,v]=Oa(h=>{const w=u().filter(b=>!b.disabled),N=w.find(b=>b.value===i.value),y=_a(w,h,N);y!==void 0&&i.onValueChange(y.value)}),j=h=>{l||(i.onOpenChange(!0),v()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return r.jsx(au,S(g({asChild:!0},a),{children:r.jsx(V.button,S(g({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Ia(i.value)?"":void 0},o),{ref:c,onClick:W(o.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&j(h)}),onPointerDown:W(o.onPointerDown,h=>{f.current=h.pointerType;const w=h.target;w.hasPointerCapture(h.pointerId)&&w.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(j(h),h.preventDefault())}),onKeyDown:W(o.onKeyDown,h=>{const w=m.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&p(h.key),!(w&&h.key===" ")&&cu.includes(h.key)&&(j(),h.preventDefault())})}))}))});ca.displayName=la;var da="SelectValue",ua=d.forwardRef((e,t)=>{const p=e,{__scopeSelect:n,className:s,style:o,children:a,placeholder:i=""}=p,l=T(p,["__scopeSelect","className","style","children","placeholder"]),c=ke(da,n),{onValueNodeHasChildrenChange:u}=c,f=a!==void 0,m=q(t,c.onValueNodeChange);return me(()=>{u(f)},[u,f]),r.jsx(V.span,S(g({},l),{ref:m,style:{pointerEvents:"none"},children:Ia(c.value)?r.jsx(r.Fragment,{children:i}):a}))});ua.displayName=da;var hu="SelectIcon",fa=d.forwardRef((e,t)=>{const a=e,{__scopeSelect:n,children:s}=a,o=T(a,["__scopeSelect","children"]);return r.jsx(V.span,S(g({"aria-hidden":!0},o),{ref:t,children:s||"▼"}))});fa.displayName=hu;var gu="SelectPortal",ma=e=>r.jsx(Wr,g({asChild:!0},e));ma.displayName=gu;var ze="SelectContent",pa=d.forwardRef((e,t)=>{const n=ke(ze,e.__scopeSelect),[s,o]=d.useState();if(me(()=>{o(new DocumentFragment)},[]),!n.open){const a=s;return a?Mn.createPortal(r.jsx(ha,{scope:e.__scopeSelect,children:r.jsx(Jt.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(ga,S(g({},e),{ref:t}))});pa.displayName=ze;var fe=10,[ha,Fe]=st(ze),xu="SelectContentImpl",vu=Ur("SelectContent.RemoveScroll"),ga=d.forwardRef((e,t)=>{const Ne=e,{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:x,avoidCollisions:h}=Ne,w=T(Ne,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),N=ke(ze,n),[y,b]=d.useState(null),[C,D]=d.useState(null),I=q(t,O=>b(O)),[A,_]=d.useState(null),[M,P]=d.useState(null),R=Zt(n),[k,K]=d.useState(!1),B=d.useRef(!1);d.useEffect(()=>{if(y)return Ds(y)},[y]),ys();const F=d.useCallback(O=>{const[Z,...re]=R().map(G=>G.ref.current),[X]=re.slice(-1),Y=document.activeElement;for(const G of O)if(G===Y||(G==null||G.scrollIntoView({block:"nearest"}),G===Z&&C&&(C.scrollTop=0),G===X&&C&&(C.scrollTop=C.scrollHeight),G==null||G.focus(),document.activeElement!==Y))return},[R,C]),H=d.useCallback(()=>F([A,y]),[F,A,y]);d.useEffect(()=>{k&&H()},[k,H]);const{onOpenChange:E,triggerPointerDownPosRef:z}=N;d.useEffect(()=>{if(y){let O={x:0,y:0};const Z=X=>{var Y,G,oe,ae;O={x:Math.abs(Math.round(X.pageX)-((G=(Y=z.current)==null?void 0:Y.x)!=null?G:0)),y:Math.abs(Math.round(X.pageY)-((ae=(oe=z.current)==null?void 0:oe.y)!=null?ae:0))}},re=X=>{O.x<=10&&O.y<=10?X.preventDefault():y.contains(X.target)||E(!1),document.removeEventListener("pointermove",Z),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",re,{capture:!0})}}},[y,E,z]),d.useEffect(()=>{const O=()=>E(!1);return window.addEventListener("blur",O),window.addEventListener("resize",O),()=>{window.removeEventListener("blur",O),window.removeEventListener("resize",O)}},[E]);const[J,ne]=Oa(O=>{const Z=R().filter(Y=>!Y.disabled),re=Z.find(Y=>Y.ref.current===document.activeElement),X=_a(Z,O,re);X&&setTimeout(()=>X.ref.current.focus())}),Ee=d.useCallback((O,Z,re)=>{const X=!B.current&&!re;(N.value!==void 0&&N.value===Z||X)&&(_(O),X&&(B.current=!0))},[N.value]),ot=d.useCallback(()=>y==null?void 0:y.focus(),[y]),at=d.useCallback((O,Z,re)=>{const X=!B.current&&!re;(N.value!==void 0&&N.value===Z||X)&&P(O)},[N.value]),be=s==="popper"?Cn:xa,it=be===Cn?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:x,avoidCollisions:h}:{};return r.jsx(ha,{scope:n,content:y,viewport:C,onViewportChange:D,itemRefCallback:Ee,selectedItem:A,onItemLeave:ot,itemTextRefCallback:at,focusSelectedItem:H,selectedItemText:M,position:s,isPositioned:k,searchRef:J,children:r.jsx(Gn,{as:vu,allowPinchZoom:!0,children:r.jsx(Yn,{asChild:!0,trapped:N.open,onMountAutoFocus:O=>{O.preventDefault()},onUnmountAutoFocus:W(o,O=>{var Z;(Z=N.trigger)==null||Z.focus({preventScroll:!0}),O.preventDefault()}),children:r.jsx(zr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:O=>O.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:r.jsx(be,S(g(g({role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:O=>O.preventDefault()},w),it),{onPlaced:()=>K(!0),ref:I,style:g({display:"flex",flexDirection:"column",outline:"none"},w.style),onKeyDown:W(w.onKeyDown,O=>{const Z=O.ctrlKey||O.altKey||O.metaKey;if(O.key==="Tab"&&O.preventDefault(),!Z&&O.key.length===1&&ne(O.key),["ArrowUp","ArrowDown","Home","End"].includes(O.key)){let X=R().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(O.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(O.key)){const Y=O.target,G=X.indexOf(Y);X=X.slice(G+1)}setTimeout(()=>F(X)),O.preventDefault()}})}))})})})})});ga.displayName=xu;var yu="SelectItemAlignedPosition",xa=d.forwardRef((e,t)=>{const I=e,{__scopeSelect:n,onPlaced:s}=I,o=T(I,["__scopeSelect","onPlaced"]),a=ke(ze,n),i=Fe(ze,n),[l,c]=d.useState(null),[u,f]=d.useState(null),m=q(t,A=>f(A)),p=Zt(n),v=d.useRef(!1),j=d.useRef(!0),{viewport:x,selectedItem:h,selectedItemText:w,focusSelectedItem:N}=i,y=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&x&&h&&w){const A=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),P=w.getBoundingClientRect();if(a.dir!=="rtl"){const Y=P.left-_.left,G=M.left-Y,oe=A.left-G,ae=A.width+oe,Se=Math.max(ae,_.width),Ye=window.innerWidth-fe,lt=_t(G,[fe,Math.max(fe,Ye-Se)]);l.style.minWidth=ae+"px",l.style.left=lt+"px"}else{const Y=_.right-P.right,G=window.innerWidth-M.right-Y,oe=window.innerWidth-A.right-G,ae=A.width+oe,Se=Math.max(ae,_.width),Ye=window.innerWidth-fe,lt=_t(G,[fe,Math.max(fe,Ye-Se)]);l.style.minWidth=ae+"px",l.style.right=lt+"px"}const R=p(),k=window.innerHeight-fe*2,K=x.scrollHeight,B=window.getComputedStyle(u),F=parseInt(B.borderTopWidth,10),H=parseInt(B.paddingTop,10),E=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),J=F+H+K+z+E,ne=Math.min(h.offsetHeight*5,J),Ee=window.getComputedStyle(x),ot=parseInt(Ee.paddingTop,10),at=parseInt(Ee.paddingBottom,10),be=A.top+A.height/2-fe,it=k-be,Ne=h.offsetHeight/2,O=h.offsetTop+Ne,Z=F+H+O,re=J-Z;if(Z<=be){const Y=R.length>0&&h===R[R.length-1].ref.current;l.style.bottom="0px";const G=u.clientHeight-x.offsetTop-x.offsetHeight,oe=Math.max(it,Ne+(Y?at:0)+G+E),ae=Z+oe;l.style.height=ae+"px"}else{const Y=R.length>0&&h===R[0].ref.current;l.style.top="0px";const oe=Math.max(be,F+x.offsetTop+(Y?ot:0)+Ne)+re;l.style.height=oe+"px",x.scrollTop=Z-be+x.offsetTop}l.style.margin=`${fe}px 0`,l.style.minHeight=ne+"px",l.style.maxHeight=k+"px",s==null||s(),requestAnimationFrame(()=>v.current=!0)}},[p,a.trigger,a.valueNode,l,u,x,h,w,a.dir,s]);me(()=>y(),[y]);const[b,C]=d.useState();me(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const D=d.useCallback(A=>{A&&j.current===!0&&(y(),N==null||N(),j.current=!1)},[y,N]);return r.jsx(ju,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:r.jsx(V.div,S(g({},o),{ref:m,style:g({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});xa.displayName=yu;var wu="SelectPopperPosition",Cn=d.forwardRef((e,t)=>{const l=e,{__scopeSelect:n,align:s="start",collisionPadding:o=fe}=l,a=T(l,["__scopeSelect","align","collisionPadding"]),i=Qt(n);return r.jsx(iu,S(g(g({},i),a),{ref:t,align:s,collisionPadding:o,style:S(g({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Cn.displayName=wu;var[ju,gr]=st(ze,{}),Tn="SelectViewport",va=d.forwardRef((e,t)=>{const u=e,{__scopeSelect:n,nonce:s}=u,o=T(u,["__scopeSelect","nonce"]),a=Fe(Tn,n),i=gr(Tn,n),l=q(t,a.onViewportChange),c=d.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Jt.Slot,{scope:n,children:r.jsx(V.div,S(g({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:g({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:W(o.onScroll,f=>{const m=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=i;if(v!=null&&v.current&&p){const j=Math.abs(c.current-m.scrollTop);if(j>0){const x=window.innerHeight-fe*2,h=parseFloat(p.style.minHeight),w=parseFloat(p.style.height),N=Math.max(h,w);if(N<x){const y=N+j,b=Math.min(x,y),C=y-b;p.style.height=b+"px",p.style.bottom==="0px"&&(m.scrollTop=C>0?C:0,p.style.justifyContent="flex-end")}}}c.current=m.scrollTop})}))})]})});va.displayName=Tn;var ya="SelectGroup",[bu,Nu]=st(ya),Su=d.forwardRef((e,t)=>{const a=e,{__scopeSelect:n}=a,s=T(a,["__scopeSelect"]),o=Ie();return r.jsx(bu,{scope:n,id:o,children:r.jsx(V.div,S(g({role:"group","aria-labelledby":o},s),{ref:t}))})});Su.displayName=ya;var wa="SelectLabel",ja=d.forwardRef((e,t)=>{const a=e,{__scopeSelect:n}=a,s=T(a,["__scopeSelect"]),o=Nu(wa,n);return r.jsx(V.div,S(g({id:o.id},s),{ref:t}))});ja.displayName=wa;var $t="SelectItem",[Cu,ba]=st($t),Na=d.forwardRef((e,t)=>{const N=e,{__scopeSelect:n,value:s,disabled:o=!1,textValue:a}=N,i=T(N,["__scopeSelect","value","disabled","textValue"]),l=ke($t,n),c=Fe($t,n),u=l.value===s,[f,m]=d.useState(a!=null?a:""),[p,v]=d.useState(!1),j=q(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,s,o)}),x=Ie(),h=d.useRef("touch"),w=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Cu,{scope:n,value:s,disabled:o,textId:x,isSelected:u,onItemTextChange:d.useCallback(y=>{m(b=>{var C;return b||((C=y==null?void 0:y.textContent)!=null?C:"").trim()})},[]),children:r.jsx(Jt.ItemSlot,{scope:n,value:s,disabled:o,textValue:f,children:r.jsx(V.div,S(g({role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i),{ref:j,onFocus:W(i.onFocus,()=>v(!0)),onBlur:W(i.onBlur,()=>v(!1)),onClick:W(i.onClick,()=>{h.current!=="mouse"&&w()}),onPointerUp:W(i.onPointerUp,()=>{h.current==="mouse"&&w()}),onPointerDown:W(i.onPointerDown,y=>{h.current=y.pointerType}),onPointerMove:W(i.onPointerMove,y=>{var b;h.current=y.pointerType,o?(b=c.onItemLeave)==null||b.call(c):h.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:W(i.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:W(i.onKeyDown,y=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(du.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})}))})})});Na.displayName=$t;var dt="SelectItemText",Sa=d.forwardRef((e,t)=>{const w=e,{__scopeSelect:n,className:s,style:o}=w,a=T(w,["__scopeSelect","className","style"]),i=ke(dt,n),l=Fe(dt,n),c=ba(dt,n),u=pu(dt,n),[f,m]=d.useState(null),p=q(t,N=>m(N),c.onItemTextChange,N=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,N,c.value,c.disabled)}),v=f==null?void 0:f.textContent,j=d.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:x,onNativeOptionRemove:h}=u;return me(()=>(x(j),()=>h(j)),[x,h,j]),r.jsxs(r.Fragment,{children:[r.jsx(V.span,S(g({id:c.textId},a),{ref:p})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Mn.createPortal(a.children,i.valueNode):null]})});Sa.displayName=dt;var Ca="SelectItemIndicator",Ta=d.forwardRef((e,t)=>{const a=e,{__scopeSelect:n}=a,s=T(a,["__scopeSelect"]);return ba(Ca,n).isSelected?r.jsx(V.span,S(g({"aria-hidden":!0},s),{ref:t})):null});Ta.displayName=Ca;var An="SelectScrollUpButton",Aa=d.forwardRef((e,t)=>{const n=Fe(An,e.__scopeSelect),s=gr(An,e.__scopeSelect),[o,a]=d.useState(!1),i=q(t,s.onScrollButtonChange);return me(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(Ea,S(g({},e),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});Aa.displayName=An;var Dn="SelectScrollDownButton",Da=d.forwardRef((e,t)=>{const n=Fe(Dn,e.__scopeSelect),s=gr(Dn,e.__scopeSelect),[o,a]=d.useState(!1),i=q(t,s.onScrollButtonChange);return me(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;a(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(Ea,S(g({},e),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});Da.displayName=Dn;var Ea=d.forwardRef((e,t)=>{const u=e,{__scopeSelect:n,onAutoScroll:s}=u,o=T(u,["__scopeSelect","onAutoScroll"]),a=Fe("SelectScrollButton",n),i=d.useRef(null),l=Zt(n),c=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),me(()=>{var m;const f=l().find(p=>p.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[l]),r.jsx(V.div,S(g({"aria-hidden":!0},o),{ref:t,style:g({flexShrink:0},o.style),onPointerDown:W(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:W(o.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:W(o.onPointerLeave,()=>{c()})}))}),Tu="SelectSeparator",Ra=d.forwardRef((e,t)=>{const o=e,{__scopeSelect:n}=o,s=T(o,["__scopeSelect"]);return r.jsx(V.div,S(g({"aria-hidden":!0},s),{ref:t}))});Ra.displayName=Tu;var En="SelectArrow",Au=d.forwardRef((e,t)=>{const l=e,{__scopeSelect:n}=l,s=T(l,["__scopeSelect"]),o=Qt(n),a=ke(En,n),i=Fe(En,n);return a.open&&i.position==="popper"?r.jsx(lu,S(g(g({},o),s),{ref:t})):null});Au.displayName=En;var Du="SelectBubbleInput",Pa=d.forwardRef((o,s)=>{var a=o,{__scopeSelect:e,value:t}=a,n=T(a,["__scopeSelect","value"]);const i=d.useRef(null),l=q(s,i),c=qr(t);return d.useEffect(()=>{const u=i.current;if(!u)return;const f=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&p){const v=new Event("change",{bubbles:!0});p.call(u,t),u.dispatchEvent(v)}},[c,t]),r.jsx(V.select,S(g({},n),{style:g(g({},Qa),n.style),ref:l,defaultValue:t}))});Pa.displayName=Du;function Ia(e){return e===""||e===void 0}function Oa(e){const t=Pt(e),n=d.useRef(""),s=d.useRef(0),o=d.useCallback(i=>{const l=n.current+i;t(l),function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=d.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,o,a]}function _a(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Eu(e,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function Eu(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Ru=ia,Ma=ca,Pu=ua,Iu=fa,Ou=ma,ka=pa,_u=va,Fa=ja,La=Na,Mu=Sa,ku=Ta,$a=Aa,Ba=Da,Va=Ra;const Br=Ru,Vr=Pu,Rn=d.forwardRef((o,s)=>{var a=o,{className:e,children:t}=a,n=T(a,["className","children"]);return r.jsxs(Ma,S(g({ref:s,className:$("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e)},n),{children:[t,r.jsx(Iu,{asChild:!0,children:r.jsx(_n,{className:"h-4 w-4 opacity-50"})})]}))});Rn.displayName=Ma.displayName;const Ha=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx($a,S(g({ref:n,className:$("flex cursor-default items-center justify-center py-1",e)},t),{children:r.jsx(ti,{className:"h-4 w-4"})}))});Ha.displayName=$a.displayName;const Wa=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Ba,S(g({ref:n,className:$("flex cursor-default items-center justify-center py-1",e)},t),{children:r.jsx(_n,{className:"h-4 w-4"})}))});Wa.displayName=Ba.displayName;const Pn=d.forwardRef((a,o)=>{var i=a,{className:e,children:t,position:n="popper"}=i,s=T(i,["className","children","position"]);return r.jsx(Ou,{children:r.jsxs(ka,S(g({ref:o,className:$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n},s),{children:[r.jsx(Ha,{}),r.jsx(_u,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(Wa,{})]}))})});Pn.displayName=ka.displayName;const Fu=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Fa,g({ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",e)},t))});Fu.displayName=Fa.displayName;const In=d.forwardRef((o,s)=>{var a=o,{className:e,children:t}=a,n=T(a,["className","children"]);return r.jsxs(La,S(g({ref:s,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e)},n),{children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ku,{children:r.jsx(ei,{className:"h-4 w-4"})})}),r.jsx(Mu,{children:t})]}))});In.displayName=La.displayName;const Lu=d.forwardRef((s,n)=>{var o=s,{className:e}=o,t=T(o,["className"]);return r.jsx(Va,g({ref:n,className:$("-mx-1 my-1 h-px bg-muted",e)},t))});Lu.displayName=Va.displayName;const $u=({exportType:e,selectedProject:t,selectedEmployee:n,dateFrom:s,dateTo:o,projects:a,employees:i,onSelectProject:l,onSelectEmployee:c,onDateFromChange:u,onDateToChange:f})=>r.jsxs(r.Fragment,{children:[e==="employee"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{htmlFor:"employee-select",children:"Выберите сотрудника"}),r.jsxs(Br,{value:n,onValueChange:c,children:[r.jsx(Rn,{children:r.jsx(Vr,{placeholder:"Выберите сотрудника"})}),r.jsx(Pn,{children:i.map(m=>r.jsx(In,{value:m,children:`Сотрудник ${m.substring(0,5)}`},m))})]})]}),e==="project"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{htmlFor:"project-select",children:"Выберите проект"}),r.jsxs(Br,{value:t,onValueChange:l,children:[r.jsx(Rn,{children:r.jsx(Vr,{placeholder:"Выберите проект"})}),r.jsx(Pn,{children:a.map(m=>r.jsx(In,{value:m.id,children:m.name},m.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{children:"Период отчета"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(U,{htmlFor:"date-from",className:"text-xs mb-1 block",children:"От"}),r.jsx(Q,{id:"date-from",type:"date",value:s,onChange:m=>u(m.target.value)})]}),r.jsxs("div",{children:[r.jsx(U,{htmlFor:"date-to",className:"text-xs mb-1 block",children:"До"}),r.jsx(Q,{id:"date-to",type:"date",value:o,onChange:m=>f(m.target.value)})]})]})]})]}),Bu=()=>r.jsxs(Pe,{className:"p-4 bg-slate-50",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Информация об отчетах:"}),r.jsx("p",{className:"text-sm text-slate-700",children:"Отчеты экспортируются в формате CSV и содержат детальную информацию о проектах, задачах, назначенных исполнителях, сроках выполнения и текущем прогрессе. Файл можно открыть в Excel или другом табличном редакторе."})]}),Hr=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("ru-RU")}catch(t){return e}},Vu=(e,t,n,s,o,a)=>{let i=[];if(t==="all")i=[...e];else if(t==="project"&&n){const l=e.find(c=>c.id===n);l&&(i=[l])}else t==="employee"&&s&&(i=e.map(l=>S(g({},l),{tasks:l.tasks.filter(c=>Array.isArray(c.assignedTo)?c.assignedTo.includes(s):c.assignedTo===s)})).filter(l=>l.tasks.length>0));return(o||a)&&(i=i.map(l=>S(g({},l),{tasks:l.tasks.filter(c=>{const u=c.startDate?new Date(c.startDate):null,f=c.endDate?new Date(c.endDate):null,m=o?new Date(o):null,p=a?new Date(a):null;return!(m&&u&&u<m||p&&f&&f>p)})})).filter(l=>l.tasks.length>0)),i},Hu=e=>{const t="\uFEFF",n=`Проект;Задача;Описание;Стоимость;Время;Прогресс;Исполнитель;Дата начала;Дата окончания
`,s=e.flatMap(a=>a.tasks.map(i=>{const l=a.name.replace(/"/g,'""'),c=i.name.replace(/"/g,'""'),u=(i.description||"").replace(/"/g,'""');let f="";return Array.isArray(i.assignedTo)?f=i.assignedTo.join(", "):i.assignedToNames&&i.assignedToNames.length>0?f=i.assignedToNames.join(", "):i.assignedTo&&(f=String(i.assignedTo)),`"${l}";"${c}";"${u}";"${i.price||0}";"${i.estimatedTime||0}";"${i.progress||0}%;"${f}";"${Hr(i.startDate)}";"${Hr(i.endDate)}"`})).join(`
`);return`data:text/csv;charset=utf-8,${encodeURIComponent(t+n+s)}`},Wu=({projects:e})=>{const[t,n]=d.useState("all"),[s,o]=d.useState(""),[a,i]=d.useState(""),[l,c]=d.useState(""),[u,f]=d.useState(""),[m,p]=d.useState(!1),v=new Set;e.forEach(h=>{h.tasks.forEach(w=>{w.assignedTo&&(Array.isArray(w.assignedTo)?w.assignedTo.forEach(N=>v.add(N)):v.add(w.assignedTo))})});const j=()=>{p(!0);try{const h=Vu(e,t,s,a,l,u),w=Hu(h),N=document.createElement("a");N.setAttribute("href",w),N.setAttribute("download",`project-report-${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N),Ce({title:"Экспорт завершен",description:"Отчет успешно скачан"})}catch(h){console.error("Ошибка при экспорте:",h),Ce({title:"Ошибка экспорта",description:"Не удалось экспортировать отчет",variant:"destructive"})}finally{p(!1)}},x=()=>!!(m||t==="employee"&&!a||t==="project"&&!s);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Qc,{exportType:t,onExportTypeChange:h=>n(h)}),r.jsx($u,{exportType:t,selectedProject:s,selectedEmployee:a,dateFrom:l,dateTo:u,projects:e,employees:Array.from(v),onSelectProject:o,onSelectEmployee:i,onDateFromChange:c,onDateToChange:f}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium disabled:pointer-events-none disabled:opacity-50",onClick:j,disabled:x(),children:m?"Экспорт...":"Экспортировать отчет"})}),r.jsx(Bu,{})]})},Uu=()=>{const[e,t]=d.useState([]),[n,s]=d.useState(!1),[o,a]=d.useState(!1),[i,l]=d.useState(null),[c,u]=d.useState(!0),[f,m]=d.useState({name:"",email:"",password:"",role:"employee"});d.useEffect(()=>{p()},[]);const p=()=>{u(!0);try{const y=localStorage.getItem("users");if(y){const b=JSON.parse(y);Array.isArray(b)?t(b):(console.error("Данные пользователей не являются массивом:",b),setTimeout(()=>{v()},0))}else setTimeout(()=>{v()},0)}catch(y){console.error("Ошибка при загрузке пользователей:",y),setTimeout(()=>{te.error("Не удалось загрузить список пользователей"),v()},0)}finally{u(!1)}},v=()=>{const y=[{id:"default-manager",name:"Менеджер",email:"manager",password:"manager123",role:"manager"},{id:"default-employee",name:"Сотрудник",email:"employee",password:"employee123",role:"employee"}];localStorage.setItem("users",JSON.stringify(y)),t(y)},j=y=>{const{name:b,value:C}=y.target;m(D=>S(g({},D),{[b]:C}))},x=y=>{m(b=>S(g({},b),{role:y}))},h=()=>{if(!f.name||!f.email||!f.password){te.error("Пожалуйста, заполните все обязательные поля");return}if(e.some(C=>C.email===f.email)){te.error("Пользователь с таким email уже существует");return}const y=S(g({},f),{id:crypto.randomUUID()}),b=[...e,y];t(b),localStorage.setItem("users",JSON.stringify(b)),s(!1),m({name:"",email:"",password:"",role:"employee"}),te.success(`Пользователь ${y.name} успешно добавлен`)},w=y=>{const b=e.find(C=>C.id===y);if(b&&(b.id==="default-manager"||b.id==="default-employee")){te.error("Нельзя удалить стандартного пользователя");return}l(y),a(!0)},N=()=>{if(!i)return;const y=e.find(C=>C.id===i);if(!y)return;const b=e.filter(C=>C.id!==i);t(b),localStorage.setItem("users",JSON.stringify(b)),te.success(`Пользователь ${y.name} успешно удален`),l(null),a(!1)};return c?r.jsxs("div",{className:"flex justify-center items-center p-8",children:[r.jsx(L,{name:"Loader2",className:"h-8 w-8 animate-spin text-primary"}),r.jsx("span",{className:"ml-2",children:"Загрузка пользователей..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Управление пользователями"}),r.jsxs(ee,{onClick:()=>s(!0),children:[r.jsx(L,{name:"UserPlus",className:"mr-2 h-4 w-4"}),"Добавить пользователя"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs(Pe,{children:[r.jsx($e,{children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h3",{className:"text-base font-medium",children:"Сотрудники"})})}),r.jsx(Be,{children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center p-10 text-center",children:[r.jsx(L,{name:"Users",className:"h-16 w-16 text-slate-300 mb-4"}),r.jsx("p",{className:"text-slate-500",children:"Список пользователей пуст"})]}):r.jsxs(Un,{children:[r.jsx(zn,{children:r.jsxs(mt,{children:[r.jsx(ie,{children:"Имя"}),r.jsx(ie,{children:"Email"}),r.jsx(ie,{children:"Роль"}),r.jsx(ie,{className:"text-right",children:"Действия"})]})}),r.jsx(Kn,{children:e.map(y=>r.jsxs(mt,{children:[r.jsx(le,{className:"font-medium",children:y.name}),r.jsx(le,{children:y.email}),r.jsx(le,{children:y.role==="manager"?"Руководитель":"Сотрудник"}),r.jsx(le,{className:"text-right",children:r.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>w(y.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:r.jsx(L,{name:"Trash2",className:"h-4 w-4"})})})]},y.id))})]})})]}),r.jsxs(Pe,{children:[r.jsx($e,{children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h3",{className:"text-base font-medium",children:"Роли и разрешения"})})}),r.jsxs(Be,{className:"space-y-3",children:[r.jsxs("div",{className:"p-3 border rounded-lg flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white mr-3",children:r.jsx(L,{name:"Crown",className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Руководитель"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Полный доступ"})]})]}),r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Активно"})]}),r.jsxs("div",{className:"p-3 border rounded-lg flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 mr-3",children:r.jsx(L,{name:"User",className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Сотрудник"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Ограниченный доступ"})]})]}),r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Активно"})]})]})]})]}),r.jsx(Gs,{open:n,onOpenChange:s,children:r.jsxs(rr,{children:[r.jsx(sr,{children:r.jsx(or,{children:"Добавить нового пользователя"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{htmlFor:"name",children:"ФИО пользователя"}),r.jsx(Q,{id:"name",name:"name",placeholder:"Введите ФИО",value:f.name,onChange:j})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{htmlFor:"email",children:"Email (логин)"}),r.jsx(Q,{id:"email",name:"email",placeholder:"email@example.com",value:f.email,onChange:j})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{htmlFor:"password",children:"Пароль"}),r.jsx(Q,{id:"password",name:"password",type:"password",placeholder:"Введите пароль",value:f.password,onChange:j})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(U,{children:"Роль пользователя"}),r.jsxs(Jr,{value:f.role,onValueChange:x,className:"flex space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{value:"manager",id:"role-manager"}),r.jsx(U,{htmlFor:"role-manager",children:"Руководитель"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{value:"employee",id:"role-employee"}),r.jsx(U,{htmlFor:"role-employee",children:"Сотрудник"})]})]})]}),r.jsx(ee,{onClick:h,className:"w-full mt-4",children:"Добавить пользователя"})]})]})}),r.jsx(jn,{isOpen:o,onClose:()=>a(!1),onConfirm:N,title:"Удаление пользователя",description:"Вы уверены, что хотите удалить этого пользователя? Это действие нельзя отменить."})]})},zu=({activeTab:e,onTabChange:t,projects:n,onImportProject:s,onUpdateProject:o,onDeleteProject:a})=>r.jsxs(ni,{defaultValue:e,onValueChange:t,className:"space-y-6",children:[r.jsxs(ri,{className:"grid grid-cols-4 w-full max-w-2xl mx-auto",children:[r.jsxs(wt,{value:"projects",children:[r.jsx(L,{name:"Layers",className:"mr-2 h-4 w-4"}),"Проекты"]}),r.jsxs(wt,{value:"import",children:[r.jsx(L,{name:"FileInput",className:"mr-2 h-4 w-4"}),"Импорт"]}),r.jsxs(wt,{value:"export",children:[r.jsx(L,{name:"FileOutput",className:"mr-2 h-4 w-4"}),"Экспорт"]}),r.jsxs(wt,{value:"users",children:[r.jsx(L,{name:"Users",className:"mr-2 h-4 w-4"}),"Пользователи"]})]}),r.jsx(jt,{value:"projects",className:"space-y-6",children:r.jsxs(Pe,{children:[r.jsxs($e,{children:[r.jsx(ct,{children:"Управление проектами"}),r.jsx(yt,{children:"Просмотр и редактирование проектов и задач"})]}),r.jsx(Be,{children:r.jsx(Jc,{projects:n,onUpdateProject:o,onDeleteProject:a,userRole:"manager"})})]})}),r.jsx(jt,{value:"import",children:r.jsxs(Pe,{children:[r.jsxs($e,{children:[r.jsx(ct,{children:"Импорт проектов"}),r.jsx(yt,{children:"Создайте новый проект или импортируйте существующий"})]}),r.jsx(Be,{children:r.jsx(Zc,{onImport:s})})]})}),r.jsx(jt,{value:"export",children:r.jsxs(Pe,{children:[r.jsxs($e,{children:[r.jsx(ct,{children:"Экспорт отчетов"}),r.jsx(yt,{children:"Формирование и экспорт отчетов по проектам"})]}),r.jsx(Be,{children:r.jsx(Wu,{projects:n})})]})}),r.jsx(jt,{value:"users",children:r.jsxs(Pe,{children:[r.jsxs($e,{children:[r.jsx(ct,{children:"Управление пользователями"}),r.jsx(yt,{children:"Добавление и управление пользователями системы"})]}),r.jsx(Be,{children:r.jsx(Uu,{})})]})})]}),Ku=({onReloadProjects:e})=>{const[t,n]=d.useState("unknown"),[s,o]=d.useState(!1),a=()=>{const u=si();n(u?"available":"unavailable"),setTimeout(()=>{te[u?"success":"error"](u?"Хранилище доступно":"Хранилище недоступно. Возможны проблемы с сохранением данных.")},0)},i=()=>{const u=ai();setTimeout(()=>{u?(te.success("Тестовый проект успешно добавлен"),e()):te.error("Не удалось добавить тестовый проект")},0)},l=()=>{if(window.confirm("Вы уверены, что хотите удалить все проекты? Это действие нельзя отменить."))try{return ii([]),setTimeout(()=>{te.success("Все проекты успешно удалены")},0),e(),!0}catch(u){return setTimeout(()=>{te.error("Не удалось удалить проекты")},0),console.error("Ошибка при удалении проектов:",u),!1}},c=()=>{try{const u=oi();setTimeout(()=>{te.success(`Текущее количество проектов: ${u.length}`)},0),console.log("Текущие проекты:",u)}catch(u){setTimeout(()=>{te.error("Ошибка при чтения проектов: "+u.message)},0)}};return s?r.jsxs(Pe,{className:"fixed bottom-4 right-4 w-72 z-50 shadow-lg",children:[r.jsx($e,{className:"pb-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ct,{className:"text-sm",children:"Диагностика хранилища"}),r.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>o(!1),children:r.jsx(L,{name:"X",size:16})})]})}),r.jsxs(Be,{className:"space-y-2 text-xs",children:[t==="unavailable"&&r.jsxs(li,{variant:"destructive",className:"py-2",children:[r.jsx(ci,{children:"Проблема с хранилищем"}),r.jsx(di,{children:"Локальное хранилище недоступно. Данные не будут сохраняться."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(ee,{size:"sm",variant:"outline",onClick:a,children:[r.jsx(L,{name:"Check",className:"mr-1 h-3 w-3"}),"Проверить хранилище"]}),r.jsxs(ee,{size:"sm",variant:"outline",onClick:c,children:[r.jsx(L,{name:"Database",className:"mr-1 h-3 w-3"}),"Проекты в хранилище"]}),r.jsxs(ee,{size:"sm",variant:"outline",onClick:i,children:[r.jsx(L,{name:"PlusCircle",className:"mr-1 h-3 w-3"}),"Добавить тестовый"]}),r.jsxs(ee,{size:"sm",variant:"outline",className:"text-red-500",onClick:l,children:[r.jsx(L,{name:"Trash2",className:"mr-1 h-3 w-3"}),"Удалить все"]})]})]})]}):r.jsxs(ee,{variant:"outline",size:"sm",className:"fixed bottom-4 right-4 bg-white opacity-70 hover:opacity-100",onClick:()=>o(!0),children:[r.jsx(L,{name:"Tool",className:"mr-2 h-4 w-4"}),"Диагностика"]})},Yu=e=>{const[t,n]=d.useState([]),[s,o]=d.useState(null),[a,i]=d.useState(!0);d.useEffect(()=>{c()},[]);const l=d.useCallback(j=>{j&&sessionStorage.setItem("auth_message",j),localStorage.removeItem("user"),e("/login")},[e]),c=d.useCallback(()=>{i(!0);const j=localStorage.getItem("user");if(j)try{const x=JSON.parse(j);if(!x.isAuthenticated){setTimeout(()=>{l("Сессия истекла. Пожалуйста, войдите снова.")},0);return}if(!x.name){const h=localStorage.getItem("users");if(h){const w=JSON.parse(h);if(Array.isArray(w)){const N=w.find(y=>y.id===x.id);N&&N.name&&(x.name=N.name)}}}if(o(x),x.role!=="manager"){setTimeout(()=>{e("/employee")},0);return}}catch(x){console.error("Failed to parse user data:",x),setTimeout(()=>{l("Проблема с данными сессии. Пожалуйста, войдите снова.")},0);return}else{setTimeout(()=>{l()},0);return}u(),i(!1)},[e,l]),u=d.useCallback(()=>{try{const j=localStorage.getItem("projects");if(j){const x=JSON.parse(j);Array.isArray(x)?(console.log("Загружено проектов:",x.length),n(x)):(console.error("Данные проектов не являются массивом:",x),n([]),localStorage.setItem("projects",JSON.stringify([])))}else console.log("Проекты не найдены в хранилище, создаем пустой массив"),localStorage.setItem("projects",JSON.stringify([])),n([])}catch(j){console.error("Произошла ошибка при загрузке проектов:",j),n([]),localStorage.setItem("projects",JSON.stringify([]))}},[]),f=d.useCallback(j=>{const x=[...t,j];n(x);try{localStorage.setItem("projects",JSON.stringify(x)),setTimeout(()=>{te.success(`Проект "${j.name}" успешно импортирован`)},0)}catch(h){console.error("Ошибка при сохранении проектов:",h),setTimeout(()=>{te.error("Не удалось сохранить проект. Проверьте хранилище браузера.")},0)}},[t]),m=d.useCallback(j=>{n(x=>{const h=x.map(w=>w.id===j.id?j:w);return localStorage.setItem("projects",JSON.stringify(h)),h})},[]),p=d.useCallback(j=>{n(x=>{const h=x.filter(w=>w.id!==j);return localStorage.setItem("projects",JSON.stringify(h)),h})},[]),v=d.useCallback(()=>{localStorage.removeItem("user"),e("/login")},[e]);return{projects:t,user:s,isLoading:a,handleImportProject:f,handleUpdateProject:m,handleDeleteProject:p,handleLogout:v}},cf=()=>{const e=Yr(),[t,n]=se.useState("projects"),[s,o]=d.useState(!1),{projects:a,user:i,isLoading:l,handleImportProject:c,handleUpdateProject:u,handleDeleteProject:f,handleLogout:m}=Yu(e);return d.useEffect(()=>{!l&&(!i||i.role!=="manager")&&o(!0)},[i,l]),d.useEffect(()=>{s&&(te.error("Доступ запрещен. Перенаправление на страницу входа."),e("/login"))},[s,e]),l?r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx(Le,{className:"h-12 w-full"}),r.jsx(Le,{className:"h-8 w-48"}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsx(Le,{className:"h-8 w-full"}),r.jsx(Le,{className:"h-8 w-full"}),r.jsx(Le,{className:"h-8 w-full"}),r.jsx(Le,{className:"h-8 w-full"})]}),r.jsx(Le,{className:"h-64 w-full"})]}):r.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[r.jsx(ui,{username:(i==null?void 0:i.name)||"",onLogout:m}),r.jsxs("main",{className:"flex-1 container mx-auto py-6 px-4",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Панель руководителя"}),r.jsx(zu,{activeTab:t,onTabChange:n,projects:a,onImportProject:c,onUpdateProject:u,onDeleteProject:f})]}),r.jsx(Ku,{onReloadProjects:()=>window.location.reload()})]})};export{cf as default};
//# sourceMappingURL=Dashboard-CIrBPcZw.js.map
